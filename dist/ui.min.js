const t=(t,e)=>new Promise((i=>setTimeout((()=>i(e)),t)));function e(t,i){if(t&&null!=i)if(Array.isArray(i))for(let s of i)e(t,s);else if("string"==typeof i||"number"==typeof i||"boolean"==typeof i){let e=document.createElement("div");e.innerHTML=""+i;let s=[...e.childNodes];for(let e of s)t.appendChild(e)}else t.appendChild(i)}self.sleep=t;const i=new Set;let s=Math.random;function l(){let t=null;do{t="ui-"+s().toString(16).slice(2)}while(i.has(t)||document.querySelector("#"+t));return i.add(t),t}function n(t,e="div"){let i=document.createElement(e);return i.innerHTML=t,i.firstElementChild}function a(...t){return[...t]}var d=Object.freeze({__proto__:null,append:e,castHtmlElements:a,downloadJson:function(t,e){const i=document.createElement("a");i.href=URL.createObjectURL(new Blob([JSON.stringify(e,null,"\t")],{type:"text/json"})),i.download=t,i.click()},dynamicallyLoadScript:async function(t){return new Promise((e=>{var i=document.createElement("script");i.src=t,i.onreadystatechange=e,i.onload=e,document.head.appendChild(i)}))},htmlToElement:n,get random(){return s},setRandom:function(t){s=t},shuffle:function(t){for(var e,i,s=t.length;0!==s;)i=Math.floor(Math.random()*s),e=t[s-=1],t[s]=t[i],t[i]=e;return t},sleep:t,uuid:l});function c(t){return class extends t{#t=new Set;droppable=!1;dragdata={};constructor(...t){super(...t)}makeDraggable(t="element",e=null,i=null){null==i?this.draggable=!0:(i.addEventListener("mousedown",(()=>{this.draggable=!0}),!0),this.addEventListener("dragend",(()=>{this.draggable=!1}),!0)),t=t.toLowerCase(),null==e&&(e=this),this.dragdata[t]=e,this.addEventListener("dragstart",(e=>{if(null==this.dataset.drag){let t="D_"+Math.floor(1e6*s()).toString(16);this.dataset.drag=t}let i=`[data-drag="${this.dataset.drag}"]`;e.dataTransfer.setData(t,i)}))}#e(){this.droppable=!0;let t=t=>{let e=t.dataTransfer.types;for(let i of this.#t)if(e.includes(i))return void t.preventDefault()};this.addEventListener("dragenter",t),this.addEventListener("dragover",t)}onDragOver(t,e){t=t.toLowerCase(),this.droppable||this.#e(),this.#t.add(t),this.addEventListener("dragover",(i=>{let s=i.dataTransfer.getData(t);if(""!=s&&s.startsWith("[data-drag")){let l=document.querySelector(s),n=l.dragdata[t];e(n,i,l)}}))}onDrop(t,e){t=t.toLowerCase(),this.droppable||this.#e(),this.#t.add(t),this.addEventListener("drop",(i=>{let s=i.dataTransfer.getData(t);if(""!=s&&s.startsWith("[data-drag")){let l=document.querySelector(s),n=l.dragdata[t];e(n,i,l)}}))}}}var o=Object.freeze({__proto__:null,Draggable:c,Readyable:function(e){return class extends e{#i=!1;constructor(...t){super(...t)}get ready(){return this.#i}set ready(t){this.#i=t}async isReady(){for(;!this.ready;)await t(10)}}}});class u extends(c(HTMLElement)){self;intervals;constructor(t,{clazz:i=""}={}){super(),this.self=this,e(this,t),i&&this.classList.add(...i.split(" ")),this.remove=this.remove.bind(this),this.intervals=[]}setContent(...t){this.innerHTML="",e(this,t)}setInterval(t,e){let i=setInterval((()=>{document.body.contains(this)?t():this.intervals.forEach((t=>clearInterval(t)))}),e);return this.intervals.push(i),i}css(t){let e=getComputedStyle(this).getPropertyValue(t);return e||(e=this.style.getPropertyValue(t)),e}cssNumber(t){let e=this.css(t),i=parseFloat(e);return e.endsWith("ms")?i:e.endsWith("s")?1e3*i:i}setCss(t,e){this.style.setProperty(t,""+e)}getCss(t){this.style.getPropertyValue(t)}get visible(){return 0==this.self.hidden}set visible(t){t?this.self.removeAttribute("hidden"):this.self.setAttribute("hidden","")}show(t){return this.self.attach(t),this.self.visible=!0,this}hide(){return this.self.visible=!1,this}remove(){return this.self.parentElement?.removeChild(this.self),this}close(){let t=this.parentElement;for(;!("close"in t);)if(t=t.parentElement,null==t)return this;return t.close(),this}attach(t){return this.self.parentElement||(null==t&&(t=document.body),t.appendChild(this.self)),this}querySelector(t){return super.querySelector(t)}querySelectorAll(t){return super.querySelectorAll(t)}}customElements.define("ui-basic",u);class h extends u{constructor(t,e,i={}){super(t,i),this.setAttribute("ui-button",""),"string"==typeof e?(this.addEventListener("click",(t=>{t.ctrlKey?window.open(e):location.href=e})),this.addEventListener("auxclick",(t=>{1==t.button&&window.open(e)})),this.addEventListener("mousedown",(t=>{1==t.button&&t.preventDefault()}))):e&&this.addEventListener("click",e),i?.style&&this.classList.add(i?.style),i?.color&&this.classList.add(i?.color);let s=i?.icon??this.attributes.getNamedItem("icon")?.value;if(s){let e=document.createElement("i"),i=s.trim().split(" ");i.includes("fa")||i.includes("fab")||i.includes("fas")||e.classList.add("fa"),e.classList.add(...i),this.prepend(e),""==t&&this.classList.add("icon-only")}}setIcon(t){this.querySelector("i").remove();let e=document.createElement("i"),i=t.trim().split(" ");i.includes("fa")||i.includes("fab")||i.includes("fas")||e.classList.add("fa"),e.classList.add(...i),this.prepend(e)}}customElements.define("ui-button",h);class r extends u{constructor(t,e){super('<input type="checkbox"/><div><span></span></div>'),this.value=t??"true"==this.attributes.getNamedItem("value")?.value,this.setAttribute("ui-toggle",""),e&&this.querySelector("input").addEventListener("change",(()=>{e(this.value)}))}get value(){return this.querySelector("input").checked}set value(t){this.querySelector("input").checked=t}}customElements.define("ui-toggle",r);class m extends u{constructor(){super(),this.classList.add("fa","fa-grip-horizontal")}}customElements.define("ui-drag",m);class b extends u{static STYLE={ROW:{parent:"table",wrap:"tr",label:"th",value:"td"},INLINE:{parent:null,wrap:"span",label:"label",value:"span"}};static TRUE_STRINGS=new Set(["true","1","yes","t","y"]);template;changeListeners;formStyle;configuration;value;constructor(t){super(),this.template=t,this.changeListeners=[],this.onChange=this.onChange.bind(this),this.formStyle=b.STYLE.ROW,this.configuration={formatting:{strings:{trim:!0}}},this.value={}}async build(t){this.value=t,this.changeListeners=[];let e=await this.jsonToHtml(this.template,t);return this.innerHTML="",this.append(...e),this.onChange(),this}async onChange(){let t=this.json();for(let e of this.changeListeners)await e(t);this.dispatchEvent(new Event("change"))}json(t=!1){let e=this._readValue(this,t);return t||(this.value=e),e}_readValue(t,e=!1){let i={},s=t.querySelectorAll("[data-key]");for(let t of s){if(!e&&t.closest("[hidden]"))continue;let s=i,l=t.dataset.key.split("."),n=l.pop();for(let t of l){if(Array.isArray(s)){let t={};s.push(t),s=t}t.includes("[]")?(t=t.replace("[]",""),s[t]=s[t]??[]):s[t]=s[t]??{},s=s[t]}let a=t["checkbox"==t.type?"checked":"value"];"string"==typeof a&&("text"!=t.type&&"string"!=t.dataset.format||this.configuration.formatting.strings.trim&&(a=a.trim()),"number"!=t.type&&"number"!=t.dataset.format||(a=parseFloat(a)),"datetime-local"!=t.type&&"datetime"!=t.dataset.format||(a=new Date(a)),"boolean"==t.dataset.format&&(a=b.TRUE_STRINGS.has((a+"").toLowerCase()))),n.includes("[]")&&(n=n.replace("[]",""),s[n]=s[n]??[],s=s[n],n=null),Array.isArray(s)&&(null===n?n=s.length:(0!=s.length&&null==s[s.length-1][n]||s.push({}),s=s[s.length-1])),s[n]=a}return i}async jsonToHtml(t,e,i="",s={style:this.formStyle}){let l=[],n=Array.isArray(t)?t:[t];for(let t of n){let n;"string"==typeof t?-1==t.indexOf(":")?n={key:null,type:t}:(n={key:t.split(":")[0],type:t.split(":")[1]},null==e&&(e={})):n=t;let a=(n.key?e[n.key]:e)??n.default;l.push(await this.oneItem(n,a,n.key?(i?i+".":"")+n.key:i,s))}if(s.style?.parent){let t=document.createElement(s.style?.parent);return t.append(...l),[t]}return l}_readJsonWithKey(t,e){try{let i=e.split(".");for(let e of i){if(null==t)return null;e.endsWith("[]")?(e=e.substring(0,e.length-2),t=t[e],t=t?.length>0?t[0]:null):t=t[e]}return t}catch(t){return null}}async oneItem(t,e,i,{style:s=b.STYLE.ROW}={}){let a=document.createElement(s.wrap);a.dataset.element=i;let d=async e=>{let d;if(t.key){if(d=document.createElement(s.label),d.innerHTML=t.name??t.key,t.hint){let e=document.createElement("div");e.innerHTML=t.hint,d.append(e)}a.append(d)}let c=document.createElement(s.value);if(c.classList.add("value"),a.append(c),"string"!=typeof t.type&&t.type){if("function"==typeof t.type){let s=t.type;if(s.prototype&&s.prototype.constructor.name){let s=new t.type(e,i,a);s.dataset.key=i,c.append(s)}else{let s=t.type(e,i,a);s.dataset.key=i,c.append(s)}}}else{let s="";switch(t.type){case"header":d.setAttribute("colspan","2"),d.classList.add("header"),c.remove();break;case"description":c.setAttribute("colspan","2"),c.classList.add("description"),c.innerHTML=t.key,d.remove();break;case"hr":c.setAttribute("colspan","2"),c.innerHTML="<hr/>";break;case"checkbox":s+=`<input data-key="${i}" type="checkbox" ${e?"checked":""}/>`,c.innerHTML=s;break;case"boolean":case"toggle":s+=`<ui-toggle data-key="${i}" value="${e??!1}"></ui-toggle>`,c.innerHTML=s;break;case"dropdown":case"select":case"list":let a;s+=`<select data-key="${i}" data-format="${t.format}">`,a=Array.isArray(t.options)?t.options:await t.options(this.value),s+=a.map((t=>`<option \n\t\t\t\t\t\t\t\t${e==(t.value?t.value:t)?"selected":""}\n\t\t\t\t\t\t\t\tvalue="${t.value?t.value:t}">${t.name?t.name:t}</option>`)).join(""),s+="</select>",c.innerHTML=s;break;case"text":s+=`<textarea data-key="${i}">${e??""}</textarea>`,c.innerHTML=s;break;case"number":s+=`<input data-key="${i}" type="number" value="${e??""}"/>`,c.innerHTML=s;break;case"object":case"compound":c.append(...await this.jsonToHtml(t.children,e??{},i));break;case"array":i+="[]";let o=t,r=o.style??"INLINE",p=o.config??{sortable:!1},Z=b.STYLE[r],W=document.createElement("div");W.classList.add("array"),W.classList.add(r);let y=new h("Add",null,{icon:"fa-plus"}),X=async t=>{let e=new u(null,{clazz:"item"});if(p.sortable){let t=new m;e.prepend(t),e.makeDraggable(i,null,t),e.onDrop(i,(t=>{let i=[...W.childNodes],s=i.indexOf(e),l=i.indexOf(t);e.insertAdjacentElement(s<l?"beforebegin":"afterend",t)}))}e.append(...await this.jsonToHtml(o.children,t,i,{style:Z})),e.append(new h("",(()=>{e.remove(),this.onChange()}),{icon:"fa-trash",style:"text",color:"error-color"}));let s=e.querySelectorAll("[data-key]");for(let t of s)t.addEventListener("change",this.onChange);W.append(e)};if(y.addEventListener("click",(async()=>{let t=await X(Array.isArray(o.children)?{}:null);return this.onChange(),t})),Array.isArray(e))for(let t of e)await X(t);c.append(W),c.append(y);break;case"datetime":{let s=n(`<input data-key="${i}" type="datetime-local" placeholder="${t.placeholder??""}"/>`);s.value=e??(new Date).toISOString().substring(0,16),t.disabled&&s.setAttribute("disabled",""),c.append(s);break}default:{let s=n(`<input data-key="${i}" type="text" placeholder="${t.placeholder??""}"/>`);if(s.value=e??null,t.disabled&&s.setAttribute("disabled",""),t.options){let i;i=Array.isArray(t.options)?t.options:await t.options(this.value);let n=l(),a=ot.html(`<datalist id="${n}">`+i.map((t=>`<option \n\t\t\t\t\t\t\t\t\t\t${e==(t.value?t.value:t)?"selected":""}\n\t\t\t\t\t\t\t\t\t\tvalue="${t.value?t.value:t}">${t.name?t.name:t}</option>`)).join("")+"</datalist>");c.append(a),s.addEventListener("focus",(()=>s.value="")),s.setAttribute("list",n)}c.append(s);break}}}let o=a.querySelectorAll("[data-key]");for(let t of o)t.addEventListener("change",(t=>{t.stopPropagation(),this.onChange()}));t.afterRender&&t.afterRender(a,this)};if(await d(e),t.hidden&&this.changeListeners.push((async e=>{a.hidden=t.hidden(e,a)})),t.redraw){let e=Array.isArray(t.redraw)?t.redraw:[t.redraw];for(let t of e){let e={},s=async s=>{let l=this._readJsonWithKey(s,t),n=JSON.stringify(l);if(e!==n){let t=this._readValue(a),s=this._readJsonWithKey(t,i);a.innerHTML="",await d(s),e=n}};this.changeListeners.push(s)}}return a}}customElements.define("ui-form",b);class p extends u{constructor(t="",i){super(),this.setAttribute("ui-panel",""),this.innerHTML.trim()||(this.innerHTML=`\n\t\t\t\t${i?.header||i?.title?`<header>${i?.title??""}</header>`:""}\n\t\t\t\t<content></content>\n\t\t\t\t${i?.footer||i?.buttons?`<footer>${i?.buttons??""}</footer>`:""}\n\t\t\t`,e(this.content,t),i?.header&&!0!==i.header&&this.header(i.header),i?.footer&&!0!==i.footer&&this.footer(i.footer)),i?.clazz&&(Array.isArray(i.clazz)?this.classList.add(...i.clazz):this.classList.add(i.clazz))}get content(){return this.querySelector("content")??this}append(...t){e(this.content,t)}header(...t){e(this.querySelector("header"),t)}footer(...t){e(this.querySelector("footer"),t)}}customElements.define("ui-panel",p);class Z extends u{constructor(t,{dismissable:e=!1}={}){super(t),this.setAttribute("ui-splash",""),e&&this.addEventListener("mousedown",this.remove)}}customElements.define("ui-splash",Z);class W extends Z{constructor(t,e){super("",{dismissable:e?.dismissable??!0}),this.setAttribute("ui-modal","");let i=new p(t,e);i.addEventListener("mousedown",(()=>event.stopPropagation())),i.self=this,this.appendChild(i)}get panel(){return this.querySelector("ui-panel")}close(){return this.self.remove(),this}}customElements.define("ui-modal",W);class y extends u{constructor(){super(),this.attach()}}function X(t,e=!1){return Array.isArray(t)&&!0===e?t.map(X).join(" "):"object"==typeof t?JSON.stringify(t,null,"\t"):""+t}customElements.define("ui-toaster",y);class L extends u{constructor(t,{level:e="info"}={}){super(X(t,!0));let i=document.createElement("i"),s={debug:"fa-bug",info:"fa-info-circle",warn:"fa-exclamation-circle",error:"fa-exclamation-triangle",success:"fa-check-circle"}[e];i.classList.add("fa",s),this.prepend(i),document.querySelector("ui-toaster")||new y;let l=document.querySelector("ui-toaster");this.classList.add(e),l.prepend(this),document.querySelectorAll("ui-toast").length,setTimeout((()=>this.style.marginTop="10px"),10),setTimeout((()=>{this.style.marginTop="-50px",this.style.opacity="0"}),4800),setTimeout((()=>this.remove()),5e3)}}function G(...t){new L(t,{level:"info"})}function I(...t){new L(t,{level:"warn"})}function V(...t){new L(t,{level:"error"})}customElements.define("ui-toast",L);var x=Object.freeze({__proto__:null,error:V,info:G,popupForm:async function(t,{value:e={},title:i="",submitText:s="Submit",wrapper:l=null,dismissable:n=!0}={}){return new Promise((a=>{let d=new b(t);d.build(e).then((()=>{let t=d;l&&(t=l(d));let e=new W(t,{title:i,buttons:"<ui-cancel></ui-cancel><ui-spacer></ui-spacer>",dismissable:n});e.close=()=>(e.self.remove(),a(null),e),e.panel.footer(new h(s,(()=>{e.self.remove(),a(d.json())}))),e.show()}))}))},warn:I});class Y extends u{constructor(t,{icon:e="",clazz:i=""}={}){if(super(t,{clazz:i}),this.setAttribute("ui-badge",""),e=e||this.attributes.getNamedItem("icon")?.value){let t=document.createElement("i"),i=e.trim().split(" ");i.includes("fa")||i.includes("fab")||i.includes("fas")||t.classList.add("fa"),t.classList.add(...i),this.prepend(t)}}}customElements.define("ui-badge",Y);class S extends u{constructor(){super(),this.innerHTML=this.innerHTML||"Cancel",this.addEventListener("click",this.close.bind(this))}}customElements.define("ui-cancel",S);class J extends u{cardInner;constructor(t){super(),this.setAttribute("ui-card","");let e=t||this.innerHTML;this.innerHTML='<div class="card"></div>',this.cardInner=this.querySelector(".card"),this.setContent(e)}setContent(t){this.cardInner.innerHTML="",e(this.cardInner,t)}async flip(){this.flipped=!this.flipped;let t=this.cssNumber("--duration");return new Promise((e=>setTimeout(e,t)))}get flipped(){return null==this.getAttribute("flipped")}set flipped(t){t?this.removeAttribute("flipped"):this.setAttribute("flipped","")}}function f(t,e,i){var s=function(t){return atob(t)}(t),l=s.indexOf("\n",10)+1,n=s.substring(l)+"",a=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(a)}function F(t,e,i){var s;return function(e){return s=s||f(t),new Worker(s,e)}}customElements.define("ui-card",J);var v=F("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCS8vIEB0cy1ub2NoZWNrCglvbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHsKCQlobGpzLmNvbmZpZ3VyZSh7fSk7CgkJY29uc3QgcmVzdWx0ID0gaGxqcy5oaWdobGlnaHRBdXRvKGV2ZW50LmRhdGEpOwoJCXBvc3RNZXNzYWdlKHJlc3VsdC52YWx1ZSk7Cgl9OwoKCS8qCgkgIEhpZ2hsaWdodC5qcyAxMC4xLjAgKDc0ZGU2ZWFhKQoJICBMaWNlbnNlOiBCU0QtMy1DbGF1c2UKCSAgQ29weXJpZ2h0IChjKSAyMDA2LTIwMjAsIEl2YW4gU2FnYWxhZXYKCSovCgl2YXIgaGxqcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUobil7T2JqZWN0LmZyZWV6ZShuKTt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgbjtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikuZm9yRWFjaCgoZnVuY3Rpb24ocil7IU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scil8fG51bGw9PT1uW3JdfHwib2JqZWN0IiE9dHlwZW9mIG5bcl0mJiJmdW5jdGlvbiIhPXR5cGVvZiBuW3JdfHx0JiYoImNhbGxlciI9PT1yfHwiY2FsbGVlIj09PXJ8fCJhcmd1bWVudHMiPT09cil8fE9iamVjdC5pc0Zyb3plbihuW3JdKXx8ZShuW3JdKTt9KSksbn1jbGFzcyBue2NvbnN0cnVjdG9yKGUpeyB2b2lkIDA9PT1lLmRhdGEmJihlLmRhdGE9e30pLHRoaXMuZGF0YT1lLmRhdGE7fWlnbm9yZU1hdGNoKCl7dGhpcy5pZ25vcmU9dHJ1ZTt9fWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGUucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7IikucmVwbGFjZSgvJy9nLCImI3gyNzsiKX1mdW5jdGlvbiByKGUsLi4ubil7dmFyIHQ9e307Zm9yKGNvbnN0IG4gaW4gZSl0W25dPWVbbl07cmV0dXJuIG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKGNvbnN0IG4gaW4gZSl0W25dPWVbbl07fSkpLHR9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfXZhciBpPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGVzY2FwZUhUTUw6dCxpbmhlcml0OnIsbm9kZVN0cmVhbTpmdW5jdGlvbihlKXt2YXIgbj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LHIpe2Zvcih2YXIgaT10LmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpMz09PWkubm9kZVR5cGU/cis9aS5ub2RlVmFsdWUubGVuZ3RoOjE9PT1pLm5vZGVUeXBlJiYobi5wdXNoKHtldmVudDoic3RhcnQiLG9mZnNldDpyLG5vZGU6aX0pLHI9ZShpLHIpLGEoaSkubWF0Y2goL2JyfGhyfGltZ3xpbnB1dC8pfHxuLnB1c2goe2V2ZW50OiJzdG9wIixvZmZzZXQ6cixub2RlOml9KSk7cmV0dXJuIHJ9KGUsMCksbn0sbWVyZ2VTdHJlYW1zOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT0wLHM9IiIsbz1bXTtmdW5jdGlvbiBsKCl7cmV0dXJuIGUubGVuZ3RoJiZuLmxlbmd0aD9lWzBdLm9mZnNldCE9PW5bMF0ub2Zmc2V0P2VbMF0ub2Zmc2V0PG5bMF0ub2Zmc2V0P2U6bjoic3RhcnQiPT09blswXS5ldmVudD9lOm46ZS5sZW5ndGg/ZTpufWZ1bmN0aW9uIGMoZSl7cys9IjwiK2EoZSkrW10ubWFwLmNhbGwoZS5hdHRyaWJ1dGVzLChmdW5jdGlvbihlKXtyZXR1cm4gIiAiK2Uubm9kZU5hbWUrJz0iJyt0KGUudmFsdWUpKyciJ30pKS5qb2luKCIiKSsiPiI7fWZ1bmN0aW9uIHUoZSl7cys9IjwvIithKGUpKyI+Ijt9ZnVuY3Rpb24gZChlKXsoInN0YXJ0Ij09PWUuZXZlbnQ/Yzp1KShlLm5vZGUpO31mb3IoO2UubGVuZ3RofHxuLmxlbmd0aDspe3ZhciBnPWwoKTtpZihzKz10KHIuc3Vic3RyaW5nKGksZ1swXS5vZmZzZXQpKSxpPWdbMF0ub2Zmc2V0LGc9PT1lKXtvLnJldmVyc2UoKS5mb3JFYWNoKHUpO2Rve2QoZy5zcGxpY2UoMCwxKVswXSksZz1sKCk7fXdoaWxlKGc9PT1lJiZnLmxlbmd0aCYmZ1swXS5vZmZzZXQ9PT1pKTtvLnJldmVyc2UoKS5mb3JFYWNoKGMpO31lbHNlICJzdGFydCI9PT1nWzBdLmV2ZW50P28ucHVzaChnWzBdLm5vZGUpOm8ucG9wKCksZChnLnNwbGljZSgwLDEpWzBdKTt9cmV0dXJuIHMrdChyLnN1YnN0cihpKSl9fSk7Y29uc3Qgcz0iPC9zcGFuPiIsbz1lPT4hIWUua2luZDtjbGFzcyBse2NvbnN0cnVjdG9yKGUsbil7dGhpcy5idWZmZXI9IiIsdGhpcy5jbGFzc1ByZWZpeD1uLmNsYXNzUHJlZml4LGUud2Fsayh0aGlzKTt9YWRkVGV4dChlKXt0aGlzLmJ1ZmZlcis9dChlKTt9b3Blbk5vZGUoZSl7aWYoIW8oZSkpcmV0dXJuO2xldCBuPWUua2luZDtlLnN1Ymxhbmd1YWdlfHwobj1gJHt0aGlzLmNsYXNzUHJlZml4fSR7bn1gKSx0aGlzLnNwYW4obik7fWNsb3NlTm9kZShlKXtvKGUpJiYodGhpcy5idWZmZXIrPXMpO312YWx1ZSgpe3JldHVybiB0aGlzLmJ1ZmZlcn1zcGFuKGUpe3RoaXMuYnVmZmVyKz1gPHNwYW4gY2xhc3M9IiR7ZX0iPmA7fX1jbGFzcyBje2NvbnN0cnVjdG9yKCl7dGhpcy5yb290Tm9kZT17Y2hpbGRyZW46W119LHRoaXMuc3RhY2s9W3RoaXMucm9vdE5vZGVdO31nZXQgdG9wKCl7cmV0dXJuIHRoaXMuc3RhY2tbdGhpcy5zdGFjay5sZW5ndGgtMV19Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy5yb290Tm9kZX1hZGQoZSl7dGhpcy50b3AuY2hpbGRyZW4ucHVzaChlKTt9b3Blbk5vZGUoZSl7Y29uc3Qgbj17a2luZDplLGNoaWxkcmVuOltdfTt0aGlzLmFkZChuKSx0aGlzLnN0YWNrLnB1c2gobik7fWNsb3NlTm9kZSgpe2lmKHRoaXMuc3RhY2subGVuZ3RoPjEpcmV0dXJuIHRoaXMuc3RhY2sucG9wKCl9Y2xvc2VBbGxOb2Rlcygpe2Zvcig7dGhpcy5jbG9zZU5vZGUoKTspO310b0pTT04oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5yb290Tm9kZSxudWxsLDQpfXdhbGsoZSl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IuX3dhbGsoZSx0aGlzLnJvb3ROb2RlKX1zdGF0aWMgX3dhbGsoZSxuKXtyZXR1cm4gInN0cmluZyI9PXR5cGVvZiBuP2UuYWRkVGV4dChuKTpuLmNoaWxkcmVuJiYoZS5vcGVuTm9kZShuKSxuLmNoaWxkcmVuLmZvckVhY2gobj0+dGhpcy5fd2FsayhlLG4pKSxlLmNsb3NlTm9kZShuKSksZX1zdGF0aWMgX2NvbGxhcHNlKGUpeyJzdHJpbmciIT10eXBlb2YgZSYmZS5jaGlsZHJlbiYmKGUuY2hpbGRyZW4uZXZlcnkoZT0+InN0cmluZyI9PXR5cGVvZiBlKT9lLmNoaWxkcmVuPVtlLmNoaWxkcmVuLmpvaW4oIiIpXTplLmNoaWxkcmVuLmZvckVhY2goZT0+e2MuX2NvbGxhcHNlKGUpO30pKTt9fWNsYXNzIHUgZXh0ZW5kcyBje2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5vcHRpb25zPWU7fWFkZEtleXdvcmQoZSxuKXsiIiE9PWUmJih0aGlzLm9wZW5Ob2RlKG4pLHRoaXMuYWRkVGV4dChlKSx0aGlzLmNsb3NlTm9kZSgpKTt9YWRkVGV4dChlKXsiIiE9PWUmJnRoaXMuYWRkKGUpO31hZGRTdWJsYW5ndWFnZShlLG4pe2NvbnN0IHQ9ZS5yb290O3Qua2luZD1uLHQuc3VibGFuZ3VhZ2U9dHJ1ZSx0aGlzLmFkZCh0KTt9dG9IVE1MKCl7cmV0dXJuIG5ldyBsKHRoaXMsdGhpcy5vcHRpb25zKS52YWx1ZSgpfWZpbmFsaXplKCl7cmV0dXJuICB0cnVlfX1mdW5jdGlvbiBkKGUpe3JldHVybiBlPyJzdHJpbmciPT10eXBlb2YgZT9lOmUuc291cmNlOm51bGx9Y29uc3QgZz0iKC0/KShcXGIwW3hYXVthLWZBLUYwLTldK3woXFxiXFxkKyhcXC5cXGQqKT98XFwuXFxkKykoW2VFXVstK10/XFxkKyk/KSIsaD17YmVnaW46IlxcXFxbXFxzXFxTXSIscmVsZXZhbmNlOjB9LGY9e2NsYXNzTmFtZToic3RyaW5nIixiZWdpbjoiJyIsZW5kOiInIixpbGxlZ2FsOiJcXG4iLGNvbnRhaW5zOltoXX0scD17Y2xhc3NOYW1lOiJzdHJpbmciLGJlZ2luOiciJyxlbmQ6JyInLGlsbGVnYWw6IlxcbiIsY29udGFpbnM6W2hdfSxiPXtiZWdpbjovXGIoYXxhbnx0aGV8YXJlfEknbXxpc24ndHxkb24ndHxkb2Vzbid0fHdvbid0fGJ1dHxqdXN0fHNob3VsZHxwcmV0dHl8c2ltcGx5fGVub3VnaHxnb25uYXxnb2luZ3x3dGZ8c298c3VjaHx3aWxsfHlvdXx5b3VyfHRoZXl8bGlrZXxtb3JlKVxiL30sbT1mdW5jdGlvbihlLG4sdD17fSl7dmFyIGE9cih7Y2xhc3NOYW1lOiJjb21tZW50IixiZWdpbjplLGVuZDpuLGNvbnRhaW5zOltdfSx0KTtyZXR1cm4gYS5jb250YWlucy5wdXNoKGIpLGEuY29udGFpbnMucHVzaCh7Y2xhc3NOYW1lOiJkb2N0YWciLGJlZ2luOiIoPzpUT0RPfEZJWE1FfE5PVEV8QlVHfE9QVElNSVpFfEhBQ0t8WFhYKToiLHJlbGV2YW5jZTowfSksYX0sdj1tKCIvLyIsIiQiKSx4PW0oIi9cXCoiLCJcXCovIiksRT1tKCIjIiwiJCIpO3ZhciBfPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLElERU5UX1JFOiJbYS16QS1aXVxcdyoiLFVOREVSU0NPUkVfSURFTlRfUkU6IlthLXpBLVpfXVxcdyoiLE5VTUJFUl9SRToiXFxiXFxkKyhcXC5cXGQrKT8iLENfTlVNQkVSX1JFOmcsQklOQVJZX05VTUJFUl9SRToiXFxiKDBiWzAxXSspIixSRV9TVEFSVEVSU19SRToiIXwhPXwhPT18JXwlPXwmfCYmfCY9fFxcKnxcXCo9fFxcK3xcXCs9fCx8LXwtPXwvPXwvfDp8O3w8PHw8PD18PD18PHw9PT18PT18PXw+Pj49fD4+PXw+PXw+Pj58Pj58PnxcXD98XFxbfFxce3xcXCh8XFxefFxcXj18XFx8fFxcfD18XFx8XFx8fH4iLFNIRUJBTkc6KGU9e30pPT57Y29uc3Qgbj0vXiMhWyBdKlwvLztyZXR1cm4gZS5iaW5hcnkmJihlLmJlZ2luPWZ1bmN0aW9uKC4uLmUpe3JldHVybiBlLm1hcChlPT5kKGUpKS5qb2luKCIiKX0obiwvLipcYi8sZS5iaW5hcnksL1xiLiovKSkscih7Y2xhc3NOYW1lOiJtZXRhIixiZWdpbjpuLGVuZDovJC8scmVsZXZhbmNlOjAsIm9uOmJlZ2luIjooZSxuKT0+ezAhPT1lLmluZGV4JiZuLmlnbm9yZU1hdGNoKCk7fX0sZSl9LEJBQ0tTTEFTSF9FU0NBUEU6aCxBUE9TX1NUUklOR19NT0RFOmYsUVVPVEVfU1RSSU5HX01PREU6cCxQSFJBU0FMX1dPUkRTX01PREU6YixDT01NRU5UOm0sQ19MSU5FX0NPTU1FTlRfTU9ERTp2LENfQkxPQ0tfQ09NTUVOVF9NT0RFOngsSEFTSF9DT01NRU5UX01PREU6RSxOVU1CRVJfTU9ERTp7Y2xhc3NOYW1lOiJudW1iZXIiLGJlZ2luOiJcXGJcXGQrKFxcLlxcZCspPyIscmVsZXZhbmNlOjB9LENfTlVNQkVSX01PREU6e2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjpnLHJlbGV2YW5jZTowfSxCSU5BUllfTlVNQkVSX01PREU6e2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjoiXFxiKDBiWzAxXSspIixyZWxldmFuY2U6MH0sQ1NTX05VTUJFUl9NT0RFOntjbGFzc05hbWU6Im51bWJlciIsYmVnaW46IlxcYlxcZCsoXFwuXFxkKyk/KCV8ZW18ZXh8Y2h8cmVtfHZ3fHZofHZtaW58dm1heHxjbXxtbXxpbnxwdHxwY3xweHxkZWd8Z3JhZHxyYWR8dHVybnxzfG1zfEh6fGtIenxkcGl8ZHBjbXxkcHB4KT8iLHJlbGV2YW5jZTowfSxSRUdFWFBfTU9ERTp7YmVnaW46Lyg/PVwvW14vXG5dKlwvKS8sY29udGFpbnM6W3tjbGFzc05hbWU6InJlZ2V4cCIsYmVnaW46L1wvLyxlbmQ6L1wvW2dpbXV5XSovLGlsbGVnYWw6L1xuLyxjb250YWluczpbaCx7YmVnaW46L1xbLyxlbmQ6L1xdLyxyZWxldmFuY2U6MCxjb250YWluczpbaF19XX1dfSxUSVRMRV9NT0RFOntjbGFzc05hbWU6InRpdGxlIixiZWdpbjoiW2EtekEtWl1cXHcqIixyZWxldmFuY2U6MH0sVU5ERVJTQ09SRV9USVRMRV9NT0RFOntjbGFzc05hbWU6InRpdGxlIixiZWdpbjoiW2EtekEtWl9dXFx3KiIscmVsZXZhbmNlOjB9LE1FVEhPRF9HVUFSRDp7YmVnaW46IlxcLlxccypbYS16QS1aX11cXHcqIixyZWxldmFuY2U6MH0sRU5EX1NBTUVfQVNfQkVHSU46ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx7Im9uOmJlZ2luIjooZSxuKT0+e24uZGF0YS5fYmVnaW5NYXRjaD1lWzFdO30sIm9uOmVuZCI6KGUsbik9PntuLmRhdGEuX2JlZ2luTWF0Y2ghPT1lWzFdJiZuLmlnbm9yZU1hdGNoKCk7fX0pfX0pLE49Im9mIGFuZCBmb3IgaW4gbm90IG9yIGlmIHRoZW4iLnNwbGl0KCIgIik7ZnVuY3Rpb24gdyhlLG4pe3JldHVybiBuPytuOmZ1bmN0aW9uKGUpe3JldHVybiBOLmluY2x1ZGVzKGUudG9Mb3dlckNhc2UoKSl9KGUpPzA6MX1jb25zdCBSPXQseT1yLHtub2RlU3RyZWFtOmssbWVyZ2VTdHJlYW1zOk99PWksTT1TeW1ib2woIm5vbWF0Y2giKTtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGE9W10saT17fSxzPXt9LG89W10sbD10cnVlLGM9LyheKDxbXj5dKz58XHR8KSt8XG4pL2dtLGc9IkNvdWxkIG5vdCBmaW5kIHRoZSBsYW5ndWFnZSAne30nLCBkaWQgeW91IGZvcmdldCB0byBsb2FkL2luY2x1ZGUgYSBsYW5ndWFnZSBtb2R1bGU/Ijtjb25zdCBoPXtkaXNhYmxlQXV0b2RldGVjdDp0cnVlLG5hbWU6IlBsYWluIHRleHQiLGNvbnRhaW5zOltdfTt2YXIgZj17bm9IaWdobGlnaHRSZTovXihuby0/aGlnaGxpZ2h0KSQvaSxsYW5ndWFnZURldGVjdFJlOi9cYmxhbmcoPzp1YWdlKT8tKFtcdy1dKylcYi9pLGNsYXNzUHJlZml4OiJobGpzLSIsdGFiUmVwbGFjZTpudWxsLHVzZUJSOmZhbHNlLGxhbmd1YWdlczpudWxsLF9fZW1pdHRlcjp1fTtmdW5jdGlvbiBwKGUpe3JldHVybiBmLm5vSGlnaGxpZ2h0UmUudGVzdChlKX1mdW5jdGlvbiBiKGUsbix0LHIpe3ZhciBhPXtjb2RlOm4sbGFuZ3VhZ2U6ZX07UygiYmVmb3JlOmhpZ2hsaWdodCIsYSk7dmFyIGk9YS5yZXN1bHQ/YS5yZXN1bHQ6bShhLmxhbmd1YWdlLGEuY29kZSx0LHIpO3JldHVybiBpLmNvZGU9YS5jb2RlLFMoImFmdGVyOmhpZ2hsaWdodCIsaSksaX1mdW5jdGlvbiBtKGUsdCxhLHMpe3ZhciBvPXQ7ZnVuY3Rpb24gYyhlLG4pe3ZhciB0PUUuY2FzZV9pbnNlbnNpdGl2ZT9uWzBdLnRvTG93ZXJDYXNlKCk6blswXTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUua2V5d29yZHMsdCkmJmUua2V5d29yZHNbdF19ZnVuY3Rpb24gdSgpe251bGwhPXkuc3ViTGFuZ3VhZ2U/ZnVuY3Rpb24oKXtpZigiIiE9PUEpe3ZhciBlPW51bGw7aWYoInN0cmluZyI9PXR5cGVvZiB5LnN1Ykxhbmd1YWdlKXtpZighaVt5LnN1Ykxhbmd1YWdlXSlyZXR1cm4gdm9pZCBPLmFkZFRleHQoQSk7ZT1tKHkuc3ViTGFuZ3VhZ2UsQSx0cnVlLGtbeS5zdWJMYW5ndWFnZV0pLGtbeS5zdWJMYW5ndWFnZV09ZS50b3A7fWVsc2UgZT12KEEseS5zdWJMYW5ndWFnZS5sZW5ndGg/eS5zdWJMYW5ndWFnZTpudWxsKTt5LnJlbGV2YW5jZT4wJiYoSSs9ZS5yZWxldmFuY2UpLE8uYWRkU3VibGFuZ3VhZ2UoZS5lbWl0dGVyLGUubGFuZ3VhZ2UpO319KCk6ZnVuY3Rpb24oKXtpZigheS5rZXl3b3JkcylyZXR1cm4gdm9pZCBPLmFkZFRleHQoQSk7bGV0IGU9MDt5LmtleXdvcmRQYXR0ZXJuUmUubGFzdEluZGV4PTA7bGV0IG49eS5rZXl3b3JkUGF0dGVyblJlLmV4ZWMoQSksdD0iIjtmb3IoO247KXt0Kz1BLnN1YnN0cmluZyhlLG4uaW5kZXgpO2NvbnN0IHI9Yyh5LG4pO2lmKHIpe2NvbnN0W2UsYV09cjtPLmFkZFRleHQodCksdD0iIixJKz1hLE8uYWRkS2V5d29yZChuWzBdLGUpO31lbHNlIHQrPW5bMF07ZT15LmtleXdvcmRQYXR0ZXJuUmUubGFzdEluZGV4LG49eS5rZXl3b3JkUGF0dGVyblJlLmV4ZWMoQSk7fXQrPUEuc3Vic3RyKGUpLE8uYWRkVGV4dCh0KTt9KCksQT0iIjt9ZnVuY3Rpb24gaChlKXtyZXR1cm4gZS5jbGFzc05hbWUmJk8ub3Blbk5vZGUoZS5jbGFzc05hbWUpLHk9T2JqZWN0LmNyZWF0ZShlLHtwYXJlbnQ6e3ZhbHVlOnl9fSl9ZnVuY3Rpb24gcChlKXtyZXR1cm4gMD09PXkubWF0Y2hlci5yZWdleEluZGV4PyhBKz1lWzBdLDEpOihMPXRydWUsMCl9dmFyIGI9e307ZnVuY3Rpb24geCh0LHIpe3ZhciBpPXImJnJbMF07aWYoQSs9dCxudWxsPT1pKXJldHVybiB1KCksMDtpZigiYmVnaW4iPT09Yi50eXBlJiYiZW5kIj09PXIudHlwZSYmYi5pbmRleD09PXIuaW5kZXgmJiIiPT09aSl7aWYoQSs9by5zbGljZShyLmluZGV4LHIuaW5kZXgrMSksIWwpe2NvbnN0IG49RXJyb3IoIjAgd2lkdGggbWF0Y2ggcmVnZXgiKTt0aHJvdyBuLmxhbmd1YWdlTmFtZT1lLG4uYmFkUnVsZT1iLnJ1bGUsbn1yZXR1cm4gMX1pZihiPXIsImJlZ2luIj09PXIudHlwZSlyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxyPWUucnVsZTtjb25zdCBhPW5ldyBuKHIpLGk9W3IuX19iZWZvcmVCZWdpbixyWyJvbjpiZWdpbiJdXTtmb3IoY29uc3QgbiBvZiBpKWlmKG4mJihuKGUsYSksYS5pZ25vcmUpKXJldHVybiBwKHQpO3JldHVybiByJiZyLmVuZFNhbWVBc0JlZ2luJiYoci5lbmRSZT1SZWdFeHAodC5yZXBsYWNlKC9bLS9cXF4kKis/LigpfFtcXXt9XS9nLCJcXCQmIiksIm0iKSksci5za2lwP0ErPXQ6KHIuZXhjbHVkZUJlZ2luJiYoQSs9dCksdSgpLHIucmV0dXJuQmVnaW58fHIuZXhjbHVkZUJlZ2lufHwoQT10KSksaChyKSxyLnJldHVybkJlZ2luPzA6dC5sZW5ndGh9KHIpO2lmKCJpbGxlZ2FsIj09PXIudHlwZSYmIWEpe2NvbnN0IGU9RXJyb3IoJ0lsbGVnYWwgbGV4ZW1lICInK2krJyIgZm9yIG1vZGUgIicrKHkuY2xhc3NOYW1lfHwiPHVubmFtZWQ+IikrJyInKTt0aHJvdyBlLm1vZGU9eSxlfWlmKCJlbmQiPT09ci50eXBlKXt2YXIgcz1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9by5zdWJzdHIoZS5pbmRleCksYT1mdW5jdGlvbiBlKHQscixhKXtsZXQgaT1mdW5jdGlvbihlLG4pe3ZhciB0PWUmJmUuZXhlYyhuKTtyZXR1cm4gdCYmMD09PXQuaW5kZXh9KHQuZW5kUmUsYSk7aWYoaSl7aWYodFsib246ZW5kIl0pe2NvbnN0IGU9bmV3IG4odCk7dFsib246ZW5kIl0ocixlKSxlLmlnbm9yZSYmKGk9ZmFsc2UpO31pZihpKXtmb3IoO3QuZW5kc1BhcmVudCYmdC5wYXJlbnQ7KXQ9dC5wYXJlbnQ7cmV0dXJuIHR9fWlmKHQuZW5kc1dpdGhQYXJlbnQpcmV0dXJuIGUodC5wYXJlbnQscixhKX0oeSxlLHIpO2lmKCFhKXJldHVybiBNO3ZhciBpPXk7aS5za2lwP0ErPXQ6KGkucmV0dXJuRW5kfHxpLmV4Y2x1ZGVFbmR8fChBKz10KSx1KCksaS5leGNsdWRlRW5kJiYoQT10KSk7ZG97eS5jbGFzc05hbWUmJk8uY2xvc2VOb2RlKCkseS5za2lwfHx5LnN1Ykxhbmd1YWdlfHwoSSs9eS5yZWxldmFuY2UpLHk9eS5wYXJlbnQ7fXdoaWxlKHkhPT1hLnBhcmVudCk7cmV0dXJuIGEuc3RhcnRzJiYoYS5lbmRTYW1lQXNCZWdpbiYmKGEuc3RhcnRzLmVuZFJlPWEuZW5kUmUpLGgoYS5zdGFydHMpKSxpLnJldHVybkVuZD8wOnQubGVuZ3RofShyKTtpZihzIT09TSlyZXR1cm4gc31pZigiaWxsZWdhbCI9PT1yLnR5cGUmJiIiPT09aSlyZXR1cm4gMTtpZihCPjFlNSYmQj4zKnIuaW5kZXgpdGhyb3cgRXJyb3IoInBvdGVudGlhbCBpbmZpbml0ZSBsb29wLCB3YXkgbW9yZSBpdGVyYXRpb25zIHRoYW4gbWF0Y2hlcyIpO3JldHVybiBBKz1pLGkubGVuZ3RofXZhciBFPVQoZSk7aWYoIUUpdGhyb3cgY29uc29sZS5lcnJvcihnLnJlcGxhY2UoInt9IixlKSksRXJyb3IoJ1Vua25vd24gbGFuZ3VhZ2U6ICInK2UrJyInKTt2YXIgXz1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKG4sdCl7cmV0dXJuIFJlZ0V4cChkKG4pLCJtIisoZS5jYXNlX2luc2Vuc2l0aXZlPyJpIjoiIikrKHQ/ImciOiIiKSl9Y2xhc3MgdHtjb25zdHJ1Y3Rvcigpe3RoaXMubWF0Y2hJbmRleGVzPXt9LHRoaXMucmVnZXhlcz1bXSx0aGlzLm1hdGNoQXQ9MSx0aGlzLnBvc2l0aW9uPTA7fWFkZFJ1bGUoZSxuKXtuLnBvc2l0aW9uPXRoaXMucG9zaXRpb24rKyx0aGlzLm1hdGNoSW5kZXhlc1t0aGlzLm1hdGNoQXRdPW4sdGhpcy5yZWdleGVzLnB1c2goW24sZV0pLHRoaXMubWF0Y2hBdCs9ZnVuY3Rpb24oZSl7cmV0dXJuIFJlZ0V4cChlLnRvU3RyaW5nKCkrInwiKS5leGVjKCIiKS5sZW5ndGgtMX0oZSkrMTt9Y29tcGlsZSgpezA9PT10aGlzLnJlZ2V4ZXMubGVuZ3RoJiYodGhpcy5leGVjPSgpPT5udWxsKTtjb25zdCBlPXRoaXMucmVnZXhlcy5tYXAoZT0+ZVsxXSk7dGhpcy5tYXRjaGVyUmU9bihmdW5jdGlvbihlLG49InwiKXtmb3IodmFyIHQ9L1xbKD86W15cXFxdXXxcXC4pKlxdfFwoXD8/fFxcKFsxLTldWzAtOV0qKXxcXC4vLHI9MCxhPSIiLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIHM9cis9MSxvPWQoZVtpXSk7Zm9yKGk+MCYmKGErPW4pLGErPSIoIjtvLmxlbmd0aD4wOyl7dmFyIGw9dC5leGVjKG8pO2lmKG51bGw9PWwpe2ErPW87YnJlYWt9YSs9by5zdWJzdHJpbmcoMCxsLmluZGV4KSxvPW8uc3Vic3RyaW5nKGwuaW5kZXgrbFswXS5sZW5ndGgpLCJcXCI9PT1sWzBdWzBdJiZsWzFdP2ErPSJcXCIrKCtsWzFdK3MpOihhKz1sWzBdLCIoIj09PWxbMF0mJnIrKyk7fWErPSIpIjt9cmV0dXJuIGF9KGUpLHRydWUpLHRoaXMubGFzdEluZGV4PTA7fWV4ZWMoZSl7dGhpcy5tYXRjaGVyUmUubGFzdEluZGV4PXRoaXMubGFzdEluZGV4O2NvbnN0IG49dGhpcy5tYXRjaGVyUmUuZXhlYyhlKTtpZighbilyZXR1cm4gbnVsbDtjb25zdCB0PW4uZmluZEluZGV4KChlLG4pPT5uPjAmJnZvaWQgMCE9PWUpLHI9dGhpcy5tYXRjaEluZGV4ZXNbdF07cmV0dXJuIG4uc3BsaWNlKDAsdCksT2JqZWN0LmFzc2lnbihuLHIpfX1jbGFzcyBhe2NvbnN0cnVjdG9yKCl7dGhpcy5ydWxlcz1bXSx0aGlzLm11bHRpUmVnZXhlcz1bXSx0aGlzLmNvdW50PTAsdGhpcy5sYXN0SW5kZXg9MCx0aGlzLnJlZ2V4SW5kZXg9MDt9Z2V0TWF0Y2hlcihlKXtpZih0aGlzLm11bHRpUmVnZXhlc1tlXSlyZXR1cm4gdGhpcy5tdWx0aVJlZ2V4ZXNbZV07Y29uc3Qgbj1uZXcgdDtyZXR1cm4gdGhpcy5ydWxlcy5zbGljZShlKS5mb3JFYWNoKChbZSx0XSk9Pm4uYWRkUnVsZShlLHQpKSxuLmNvbXBpbGUoKSx0aGlzLm11bHRpUmVnZXhlc1tlXT1uLG59Y29uc2lkZXJBbGwoKXt0aGlzLnJlZ2V4SW5kZXg9MDt9YWRkUnVsZShlLG4pe3RoaXMucnVsZXMucHVzaChbZSxuXSksImJlZ2luIj09PW4udHlwZSYmdGhpcy5jb3VudCsrO31leGVjKGUpe2NvbnN0IG49dGhpcy5nZXRNYXRjaGVyKHRoaXMucmVnZXhJbmRleCk7bi5sYXN0SW5kZXg9dGhpcy5sYXN0SW5kZXg7Y29uc3QgdD1uLmV4ZWMoZSk7cmV0dXJuIHQmJih0aGlzLnJlZ2V4SW5kZXgrPXQucG9zaXRpb24rMSx0aGlzLnJlZ2V4SW5kZXg9PT10aGlzLmNvdW50JiYodGhpcy5yZWdleEluZGV4PTApKSx0fX1mdW5jdGlvbiBpKGUsbil7Y29uc3QgdD1lLmlucHV0W2UuaW5kZXgtMV0scj1lLmlucHV0W2UuaW5kZXgrZVswXS5sZW5ndGhdOyIuIiE9PXQmJiIuIiE9PXJ8fG4uaWdub3JlTWF0Y2goKTt9aWYoZS5jb250YWlucyYmZS5jb250YWlucy5pbmNsdWRlcygic2VsZiIpKXRocm93IEVycm9yKCJFUlI6IGNvbnRhaW5zIGBzZWxmYCBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoZSB0b3AtbGV2ZWwgb2YgYSBsYW5ndWFnZS4gIFNlZSBkb2N1bWVudGF0aW9uLiIpO3JldHVybiBmdW5jdGlvbiB0KHMsbyl7Y29uc3QgbD1zO2lmKHMuY29tcGlsZWQpcmV0dXJuIGw7cy5jb21waWxlZD10cnVlLHMuX19iZWZvcmVCZWdpbj1udWxsLHMua2V5d29yZHM9cy5rZXl3b3Jkc3x8cy5iZWdpbktleXdvcmRzO2xldCBjPW51bGw7aWYoIm9iamVjdCI9PXR5cGVvZiBzLmtleXdvcmRzJiYoYz1zLmtleXdvcmRzLiRwYXR0ZXJuLGRlbGV0ZSBzLmtleXdvcmRzLiRwYXR0ZXJuKSxzLmtleXdvcmRzJiYocy5rZXl3b3Jkcz1mdW5jdGlvbihlLG4pe3ZhciB0PXt9O3JldHVybiAic3RyaW5nIj09dHlwZW9mIGU/cigia2V5d29yZCIsZSk6T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7cihuLGVbbl0pO30pKSx0O2Z1bmN0aW9uIHIoZSxyKXtuJiYocj1yLnRvTG93ZXJDYXNlKCkpLHIuc3BsaXQoIiAiKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj1uLnNwbGl0KCJ8Iik7dFtyWzBdXT1bZSx3KHJbMF0sclsxXSldO30pKTt9fShzLmtleXdvcmRzLGUuY2FzZV9pbnNlbnNpdGl2ZSkpLHMubGV4ZW1lcyYmYyl0aHJvdyBFcnJvcigiRVJSOiBQcmVmZXIgYGtleXdvcmRzLiRwYXR0ZXJuYCB0byBgbW9kZS5sZXhlbWVzYCwgQk9USCBhcmUgbm90IGFsbG93ZWQuIChzZWUgbW9kZSByZWZlcmVuY2UpICIpO3JldHVybiBsLmtleXdvcmRQYXR0ZXJuUmU9bihzLmxleGVtZXN8fGN8fC9cdysvLHRydWUpLG8mJihzLmJlZ2luS2V5d29yZHMmJihzLmJlZ2luPSJcXGIoIitzLmJlZ2luS2V5d29yZHMuc3BsaXQoIiAiKS5qb2luKCJ8IikrIikoPz1cXGJ8XFxzKSIscy5fX2JlZm9yZUJlZ2luPWkpLHMuYmVnaW58fChzLmJlZ2luPS9cQnxcYi8pLGwuYmVnaW5SZT1uKHMuYmVnaW4pLHMuZW5kU2FtZUFzQmVnaW4mJihzLmVuZD1zLmJlZ2luKSxzLmVuZHx8cy5lbmRzV2l0aFBhcmVudHx8KHMuZW5kPS9cQnxcYi8pLHMuZW5kJiYobC5lbmRSZT1uKHMuZW5kKSksbC50ZXJtaW5hdG9yX2VuZD1kKHMuZW5kKXx8IiIscy5lbmRzV2l0aFBhcmVudCYmby50ZXJtaW5hdG9yX2VuZCYmKGwudGVybWluYXRvcl9lbmQrPShzLmVuZD8ifCI6IiIpK28udGVybWluYXRvcl9lbmQpKSxzLmlsbGVnYWwmJihsLmlsbGVnYWxSZT1uKHMuaWxsZWdhbCkpLHZvaWQgMD09PXMucmVsZXZhbmNlJiYocy5yZWxldmFuY2U9MSkscy5jb250YWluc3x8KHMuY29udGFpbnM9W10pLHMuY29udGFpbnM9W10uY29uY2F0KC4uLnMuY29udGFpbnMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUudmFyaWFudHMmJiFlLmNhY2hlZF92YXJpYW50cyYmKGUuY2FjaGVkX3ZhcmlhbnRzPWUudmFyaWFudHMubWFwKChmdW5jdGlvbihuKXtyZXR1cm4gcihlLHt2YXJpYW50czpudWxsfSxuKX0pKSksZS5jYWNoZWRfdmFyaWFudHM/ZS5jYWNoZWRfdmFyaWFudHM6ZnVuY3Rpb24gZShuKXtyZXR1cm4gISFuJiYobi5lbmRzV2l0aFBhcmVudHx8ZShuLnN0YXJ0cykpfShlKT9yKGUse3N0YXJ0czplLnN0YXJ0cz9yKGUuc3RhcnRzKTpudWxsfSk6T2JqZWN0LmlzRnJvemVuKGUpP3IoZSk6ZX0oInNlbGYiPT09ZT9zOmUpfSkpKSxzLmNvbnRhaW5zLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QoZSxsKTt9KSkscy5zdGFydHMmJnQocy5zdGFydHMsbyksbC5tYXRjaGVyPWZ1bmN0aW9uKGUpe2NvbnN0IG49bmV3IGE7cmV0dXJuIGUuY29udGFpbnMuZm9yRWFjaChlPT5uLmFkZFJ1bGUoZS5iZWdpbix7cnVsZTplLHR5cGU6ImJlZ2luIn0pKSxlLnRlcm1pbmF0b3JfZW5kJiZuLmFkZFJ1bGUoZS50ZXJtaW5hdG9yX2VuZCx7dHlwZToiZW5kIn0pLGUuaWxsZWdhbCYmbi5hZGRSdWxlKGUuaWxsZWdhbCx7dHlwZToiaWxsZWdhbCJ9KSxufShsKSxsfShlKX0oRSksTj0iIix5PXN8fF8saz17fSxPPW5ldyBmLl9fZW1pdHRlcihmKTshZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sbj15O24hPT1FO249bi5wYXJlbnQpbi5jbGFzc05hbWUmJmUudW5zaGlmdChuLmNsYXNzTmFtZSk7ZS5mb3JFYWNoKGU9Pk8ub3Blbk5vZGUoZSkpO30oKTt2YXIgQT0iIixJPTAsUz0wLEI9MCxMPWZhbHNlO3RyeXtmb3IoeS5tYXRjaGVyLmNvbnNpZGVyQWxsKCk7Oyl7QisrLEw/TD0hMTooeS5tYXRjaGVyLmxhc3RJbmRleD1TLHkubWF0Y2hlci5jb25zaWRlckFsbCgpKTtjb25zdCBlPXkubWF0Y2hlci5leGVjKG8pO2lmKCFlKWJyZWFrO2NvbnN0IG49eChvLnN1YnN0cmluZyhTLGUuaW5kZXgpLGUpO1M9ZS5pbmRleCtuO31yZXR1cm4geChvLnN1YnN0cihTKSksTy5jbG9zZUFsbE5vZGVzKCksTy5maW5hbGl6ZSgpLE49Ty50b0hUTUwoKSx7cmVsZXZhbmNlOkksdmFsdWU6TixsYW5ndWFnZTplLGlsbGVnYWw6ITEsZW1pdHRlcjpPLHRvcDp5fX1jYXRjaChuKXtpZihuLm1lc3NhZ2UmJm4ubWVzc2FnZS5pbmNsdWRlcygiSWxsZWdhbCIpKXJldHVybiB7aWxsZWdhbDp0cnVlLGlsbGVnYWxCeTp7bXNnOm4ubWVzc2FnZSxjb250ZXh0Om8uc2xpY2UoUy0xMDAsUysxMDApLG1vZGU6bi5tb2RlfSxzb2ZhcjpOLHJlbGV2YW5jZTowLHZhbHVlOlIobyksZW1pdHRlcjpPfTtpZihsKXJldHVybiB7aWxsZWdhbDpmYWxzZSxyZWxldmFuY2U6MCx2YWx1ZTpSKG8pLGVtaXR0ZXI6TyxsYW5ndWFnZTplLHRvcDp5LGVycm9yUmFpc2VkOm59O3Rocm93IG59fWZ1bmN0aW9uIHYoZSxuKXtuPW58fGYubGFuZ3VhZ2VzfHxPYmplY3Qua2V5cyhpKTt2YXIgdD1mdW5jdGlvbihlKXtjb25zdCBuPXtyZWxldmFuY2U6MCxlbWl0dGVyOm5ldyBmLl9fZW1pdHRlcihmKSx2YWx1ZTpSKGUpLGlsbGVnYWw6ZmFsc2UsdG9wOmh9O3JldHVybiBuLmVtaXR0ZXIuYWRkVGV4dChlKSxufShlKSxyPXQ7cmV0dXJuIG4uZmlsdGVyKFQpLmZpbHRlcihJKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgYT1tKG4sZSxmYWxzZSk7YS5sYW5ndWFnZT1uLGEucmVsZXZhbmNlPnIucmVsZXZhbmNlJiYocj1hKSxhLnJlbGV2YW5jZT50LnJlbGV2YW5jZSYmKHI9dCx0PWEpO30pKSxyLmxhbmd1YWdlJiYodC5zZWNvbmRfYmVzdD1yKSx0fWZ1bmN0aW9uIHgoZSl7cmV0dXJuIGYudGFiUmVwbGFjZXx8Zi51c2VCUj9lLnJlcGxhY2UoYyxlPT4iXG4iPT09ZT9mLnVzZUJSPyI8YnI+IjplOmYudGFiUmVwbGFjZT9lLnJlcGxhY2UoL1x0L2csZi50YWJSZXBsYWNlKTplKTplfWZ1bmN0aW9uIEUoZSl7bGV0IG49bnVsbDtjb25zdCB0PWZ1bmN0aW9uKGUpe3ZhciBuPWUuY2xhc3NOYW1lKyIgIjtuKz1lLnBhcmVudE5vZGU/ZS5wYXJlbnROb2RlLmNsYXNzTmFtZToiIjtjb25zdCB0PWYubGFuZ3VhZ2VEZXRlY3RSZS5leGVjKG4pO2lmKHQpe3ZhciByPVQodFsxXSk7cmV0dXJuIHJ8fChjb25zb2xlLndhcm4oZy5yZXBsYWNlKCJ7fSIsdFsxXSkpLGNvbnNvbGUud2FybigiRmFsbGluZyBiYWNrIHRvIG5vLWhpZ2hsaWdodCBtb2RlIGZvciB0aGlzIGJsb2NrLiIsZSkpLHI/dFsxXToibm8taGlnaGxpZ2h0In1yZXR1cm4gbi5zcGxpdCgvXHMrLykuZmluZChlPT5wKGUpfHxUKGUpKX0oZSk7aWYocCh0KSlyZXR1cm47UygiYmVmb3JlOmhpZ2hsaWdodEJsb2NrIix7YmxvY2s6ZSxsYW5ndWFnZTp0fSksZi51c2VCUj8obj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUuaW5uZXJIVE1MLnJlcGxhY2UoL1xuL2csIiIpLnJlcGxhY2UoLzxiclsgL10qPi9nLCJcbiIpOm49ZTtjb25zdCByPW4udGV4dENvbnRlbnQsYT10P2IodCxyLHRydWUpOnYociksaT1rKG4pO2lmKGkubGVuZ3RoKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuaW5uZXJIVE1MPWEudmFsdWUsYS52YWx1ZT1PKGksayhlKSxyKTt9YS52YWx1ZT14KGEudmFsdWUpLFMoImFmdGVyOmhpZ2hsaWdodEJsb2NrIix7YmxvY2s6ZSxyZXN1bHQ6YX0pLGUuaW5uZXJIVE1MPWEudmFsdWUsZS5jbGFzc05hbWU9ZnVuY3Rpb24oZSxuLHQpe3ZhciByPW4/c1tuXTp0LGE9W2UudHJpbSgpXTtyZXR1cm4gZS5tYXRjaCgvXGJobGpzXGIvKXx8YS5wdXNoKCJobGpzIiksZS5pbmNsdWRlcyhyKXx8YS5wdXNoKHIpLGEuam9pbigiICIpLnRyaW0oKX0oZS5jbGFzc05hbWUsdCxhLmxhbmd1YWdlKSxlLnJlc3VsdD17bGFuZ3VhZ2U6YS5sYW5ndWFnZSxyZTphLnJlbGV2YW5jZSxyZWxhdmFuY2U6YS5yZWxldmFuY2V9LGEuc2Vjb25kX2Jlc3QmJihlLnNlY29uZF9iZXN0PXtsYW5ndWFnZTphLnNlY29uZF9iZXN0Lmxhbmd1YWdlLHJlOmEuc2Vjb25kX2Jlc3QucmVsZXZhbmNlLHJlbGF2YW5jZTphLnNlY29uZF9iZXN0LnJlbGV2YW5jZX0pO31jb25zdCBOPSgpPT57aWYoIU4uY2FsbGVkKXtOLmNhbGxlZD10cnVlO3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInByZSBjb2RlIik7YS5mb3JFYWNoLmNhbGwoZSxFKTt9fTtmdW5jdGlvbiBUKGUpe3JldHVybiBlPShlfHwiIikudG9Mb3dlckNhc2UoKSxpW2VdfHxpW3NbZV1dfWZ1bmN0aW9uIEEoZSx7bGFuZ3VhZ2VOYW1lOm59KXsic3RyaW5nIj09dHlwZW9mIGUmJihlPVtlXSksZS5mb3JFYWNoKGU9PntzW2VdPW47fSk7fWZ1bmN0aW9uIEkoZSl7dmFyIG49VChlKTtyZXR1cm4gbiYmIW4uZGlzYWJsZUF1dG9kZXRlY3R9ZnVuY3Rpb24gUyhlLG4pe3ZhciB0PWU7by5mb3JFYWNoKChmdW5jdGlvbihlKXtlW3RdJiZlW3RdKG4pO30pKTt9T2JqZWN0LmFzc2lnbih0LHtoaWdobGlnaHQ6YixoaWdobGlnaHRBdXRvOnYsZml4TWFya3VwOngsaGlnaGxpZ2h0QmxvY2s6RSxjb25maWd1cmU6ZnVuY3Rpb24oZSl7Zj15KGYsZSk7fSxpbml0SGlnaGxpZ2h0aW5nOk4saW5pdEhpZ2hsaWdodGluZ09uTG9hZDpmdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixOLGZhbHNlKTt9LHJlZ2lzdGVyTGFuZ3VhZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgcj1udWxsO3RyeXtyPW4odCk7fWNhdGNoKG4pe2lmKGNvbnNvbGUuZXJyb3IoIkxhbmd1YWdlIGRlZmluaXRpb24gZm9yICd7fScgY291bGQgbm90IGJlIHJlZ2lzdGVyZWQuIi5yZXBsYWNlKCJ7fSIsZSkpLCFsKXRocm93IG47Y29uc29sZS5lcnJvcihuKSxyPWg7fXIubmFtZXx8KHIubmFtZT1lKSxpW2VdPXIsci5yYXdEZWZpbml0aW9uPW4uYmluZChudWxsLHQpLHIuYWxpYXNlcyYmQShyLmFsaWFzZXMse2xhbmd1YWdlTmFtZTplfSk7fSxsaXN0TGFuZ3VhZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKGkpfSxnZXRMYW5ndWFnZTpULHJlZ2lzdGVyQWxpYXNlczpBLHJlcXVpcmVMYW5ndWFnZTpmdW5jdGlvbihlKXt2YXIgbj1UKGUpO2lmKG4pcmV0dXJuIG47dGhyb3cgRXJyb3IoIlRoZSAne30nIGxhbmd1YWdlIGlzIHJlcXVpcmVkLCBidXQgbm90IGxvYWRlZC4iLnJlcGxhY2UoInt9IixlKSl9LGF1dG9EZXRlY3Rpb246SSxpbmhlcml0OnksYWRkUGx1Z2luOmZ1bmN0aW9uKGUpe28ucHVzaChlKTt9fSksdC5kZWJ1Z01vZGU9ZnVuY3Rpb24oKXtsPWZhbHNlO30sdC5zYWZlTW9kZT1mdW5jdGlvbigpe2w9dHJ1ZTt9LHQudmVyc2lvblN0cmluZz0iMTAuMS4wIjtmb3IoY29uc3QgbiBpbiBfKSJvYmplY3QiPT10eXBlb2YgX1tuXSYmZShfW25dKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih0LF8pLHR9KHt9KX0oKTsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9aGxqcyk7CglobGpzLnJlZ2lzdGVyTGFuZ3VhZ2UoImNzcyIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49e2JlZ2luOi8oPzpbQS1aXF9cLlwtXSt8LS1bYS16QS1aMC05Xy1dKylccyo6LyxyZXR1cm5CZWdpbjp0cnVlLGVuZDoiOyIsZW5kc1dpdGhQYXJlbnQ6dHJ1ZSxjb250YWluczpbe2NsYXNzTmFtZToiYXR0cmlidXRlIixiZWdpbjovXFMvLGVuZDoiOiIsZXhjbHVkZUVuZDp0cnVlLHN0YXJ0czp7ZW5kc1dpdGhQYXJlbnQ6dHJ1ZSxleGNsdWRlRW5kOnRydWUsY29udGFpbnM6W3tiZWdpbjovW1x3LV0rXCgvLHJldHVybkJlZ2luOnRydWUsY29udGFpbnM6W3tjbGFzc05hbWU6ImJ1aWx0X2luIixiZWdpbjovW1x3LV0rL30se2JlZ2luOi9cKC8sZW5kOi9cKS8sY29udGFpbnM6W2UuQVBPU19TVFJJTkdfTU9ERSxlLlFVT1RFX1NUUklOR19NT0RFLGUuQ1NTX05VTUJFUl9NT0RFXX1dfSxlLkNTU19OVU1CRVJfTU9ERSxlLlFVT1RFX1NUUklOR19NT0RFLGUuQVBPU19TVFJJTkdfTU9ERSxlLkNfQkxPQ0tfQ09NTUVOVF9NT0RFLHtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46IiNbMC05QS1GYS1mXSsifSx7Y2xhc3NOYW1lOiJtZXRhIixiZWdpbjoiIWltcG9ydGFudCJ9XX19XX07cmV0dXJuIHtuYW1lOiJDU1MiLGNhc2VfaW5zZW5zaXRpdmU6dHJ1ZSxpbGxlZ2FsOi9bPVwvfCdcJF0vLGNvbnRhaW5zOltlLkNfQkxPQ0tfQ09NTUVOVF9NT0RFLHtjbGFzc05hbWU6InNlbGVjdG9yLWlkIixiZWdpbjovI1tBLVphLXowLTlfLV0rL30se2NsYXNzTmFtZToic2VsZWN0b3ItY2xhc3MiLGJlZ2luOi9cLltBLVphLXowLTlfLV0rL30se2NsYXNzTmFtZToic2VsZWN0b3ItYXR0ciIsYmVnaW46L1xbLyxlbmQ6L1xdLyxpbGxlZ2FsOiIkIixjb250YWluczpbZS5BUE9TX1NUUklOR19NT0RFLGUuUVVPVEVfU1RSSU5HX01PREVdfSx7Y2xhc3NOYW1lOiJzZWxlY3Rvci1wc2V1ZG8iLGJlZ2luOi86KDopP1thLXpBLVowLTlcX1wtXCtcKFwpIicuXSsvfSx7YmVnaW46IkAocGFnZXxmb250LWZhY2UpIixsZXhlbWVzOiJAW2Etei1dKyIsa2V5d29yZHM6IkBwYWdlIEBmb250LWZhY2UifSx7YmVnaW46IkAiLGVuZDoiW3s7XSIsaWxsZWdhbDovOi8scmV0dXJuQmVnaW46dHJ1ZSxjb250YWluczpbe2NsYXNzTmFtZToia2V5d29yZCIsYmVnaW46L0BcLT9cd1tcd10qKFwtXHcrKSovfSx7YmVnaW46L1xzLyxlbmRzV2l0aFBhcmVudDp0cnVlLGV4Y2x1ZGVFbmQ6dHJ1ZSxyZWxldmFuY2U6MCxrZXl3b3JkczoiYW5kIG9yIG5vdCBvbmx5Iixjb250YWluczpbe2JlZ2luOi9bYS16LV0rOi8sY2xhc3NOYW1lOiJhdHRyaWJ1dGUifSxlLkFQT1NfU1RSSU5HX01PREUsZS5RVU9URV9TVFJJTkdfTU9ERSxlLkNTU19OVU1CRVJfTU9ERV19XX0se2NsYXNzTmFtZToic2VsZWN0b3ItdGFnIixiZWdpbjoiW2EtekEtWi1dW2EtekEtWjAtOV8tXSoiLHJlbGV2YW5jZTowfSx7YmVnaW46InsiLGVuZDoifSIsaWxsZWdhbDovXFMvLGNvbnRhaW5zOltlLkNfQkxPQ0tfQ09NTUVOVF9NT0RFLG5dfV19fX0oKSk7CglobGpzLnJlZ2lzdGVyTGFuZ3VhZ2UoImRpZmYiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB7bmFtZToiRGlmZiIsYWxpYXNlczpbInBhdGNoIl0sY29udGFpbnM6W3tjbGFzc05hbWU6Im1ldGEiLHJlbGV2YW5jZToxMCx2YXJpYW50czpbe2JlZ2luOi9eQEAgK1wtXGQrLFxkKyArXCtcZCssXGQrICtAQCQvfSx7YmVnaW46L15cKlwqXCogK1xkKyxcZCsgK1wqXCpcKlwqJC99LHtiZWdpbjovXlwtXC1cLSArXGQrLFxkKyArXC1cLVwtXC0kL31dfSx7Y2xhc3NOYW1lOiJjb21tZW50Iix2YXJpYW50czpbe2JlZ2luOi9JbmRleDogLyxlbmQ6LyQvfSx7YmVnaW46Lz17Myx9LyxlbmQ6LyQvfSx7YmVnaW46L15cLXszfS8sZW5kOi8kL30se2JlZ2luOi9eXCp7M30gLyxlbmQ6LyQvfSx7YmVnaW46L15cK3szfS8sZW5kOi8kL30se2JlZ2luOi9eXCp7MTV9JC99XX0se2NsYXNzTmFtZToiYWRkaXRpb24iLGJlZ2luOiJeXFwrIixlbmQ6IiQifSx7Y2xhc3NOYW1lOiJkZWxldGlvbiIsYmVnaW46Il5cXC0iLGVuZDoiJCJ9LHtjbGFzc05hbWU6ImFkZGl0aW9uIixiZWdpbjoiXlxcISIsZW5kOiIkIn1dfX19KCkpOwoJaGxqcy5yZWdpc3Rlckxhbmd1YWdlKCJqYXZhc2NyaXB0IixmdW5jdGlvbigpe2NvbnN0IGU9WyJhcyIsImluIiwib2YiLCJpZiIsImZvciIsIndoaWxlIiwiZmluYWxseSIsInZhciIsIm5ldyIsImZ1bmN0aW9uIiwiZG8iLCJyZXR1cm4iLCJ2b2lkIiwiZWxzZSIsImJyZWFrIiwiY2F0Y2giLCJpbnN0YW5jZW9mIiwid2l0aCIsInRocm93IiwiY2FzZSIsImRlZmF1bHQiLCJ0cnkiLCJzd2l0Y2giLCJjb250aW51ZSIsInR5cGVvZiIsImRlbGV0ZSIsImxldCIsInlpZWxkIiwiY29uc3QiLCJjbGFzcyIsImRlYnVnZ2VyIiwiYXN5bmMiLCJhd2FpdCIsInN0YXRpYyIsImltcG9ydCIsImZyb20iLCJleHBvcnQiLCJleHRlbmRzIl0sbj1bInRydWUiLCJmYWxzZSIsIm51bGwiLCJ1bmRlZmluZWQiLCJOYU4iLCJJbmZpbml0eSJdLGE9W10uY29uY2F0KFsic2V0SW50ZXJ2YWwiLCJzZXRUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyVGltZW91dCIsInJlcXVpcmUiLCJleHBvcnRzIiwiZXZhbCIsImlzRmluaXRlIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwicGFyc2VJbnQiLCJkZWNvZGVVUkkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlbmNvZGVVUkkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJlc2NhcGUiLCJ1bmVzY2FwZSJdLFsiYXJndW1lbnRzIiwidGhpcyIsInN1cGVyIiwiY29uc29sZSIsIndpbmRvdyIsImRvY3VtZW50IiwibG9jYWxTdG9yYWdlIiwibW9kdWxlIiwiZ2xvYmFsIl0sWyJJbnRsIiwiRGF0YVZpZXciLCJOdW1iZXIiLCJNYXRoIiwiRGF0ZSIsIlN0cmluZyIsIlJlZ0V4cCIsIk9iamVjdCIsIkZ1bmN0aW9uIiwiQm9vbGVhbiIsIkVycm9yIiwiU3ltYm9sIiwiU2V0IiwiTWFwIiwiV2Vha1NldCIsIldlYWtNYXAiLCJQcm94eSIsIlJlZmxlY3QiLCJKU09OIiwiUHJvbWlzZSIsIkZsb2F0NjRBcnJheSIsIkludDE2QXJyYXkiLCJJbnQzMkFycmF5IiwiSW50OEFycmF5IiwiVWludDE2QXJyYXkiLCJVaW50MzJBcnJheSIsIkZsb2F0MzJBcnJheSIsIkFycmF5IiwiVWludDhBcnJheSIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiQXJyYXlCdWZmZXIiXSxbIkV2YWxFcnJvciIsIkludGVybmFsRXJyb3IiLCJSYW5nZUVycm9yIiwiUmVmZXJlbmNlRXJyb3IiLCJTeW50YXhFcnJvciIsIlR5cGVFcnJvciIsIlVSSUVycm9yIl0pO2Z1bmN0aW9uIHMoZSl7cmV0dXJuIHIoIig/PSIsZSwiKSIpfWZ1bmN0aW9uIHIoLi4uZSl7cmV0dXJuIGUubWFwKGU9PihmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/ZTplLnNvdXJjZTpudWxsfSkoZSkpLmpvaW4oIiIpfXJldHVybiBmdW5jdGlvbih0KXt2YXIgaT0iW0EtWmEteiRfXVswLTlBLVphLXokX10qIixjPXtiZWdpbjovPFtBLVphLXowLTlcXC5fOi1dKy8sZW5kOi9cL1tBLVphLXowLTlcXC5fOi1dKz58XC8+L30sbz17JHBhdHRlcm46IltBLVphLXokX11bMC05QS1aYS16JF9dKiIsa2V5d29yZDplLmpvaW4oIiAiKSxsaXRlcmFsOm4uam9pbigiICIpLGJ1aWx0X2luOmEuam9pbigiICIpfSxsPXtjbGFzc05hbWU6Im51bWJlciIsdmFyaWFudHM6W3tiZWdpbjoiXFxiKDBbYkJdWzAxXSspbj8ifSx7YmVnaW46IlxcYigwW29PXVswLTddKyluPyJ9LHtiZWdpbjp0LkNfTlVNQkVSX1JFKyJuPyJ9XSxyZWxldmFuY2U6MH0sRT17Y2xhc3NOYW1lOiJzdWJzdCIsYmVnaW46IlxcJFxceyIsZW5kOiJcXH0iLGtleXdvcmRzOm8sY29udGFpbnM6W119LGQ9e2JlZ2luOiJodG1sYCIsZW5kOiIiLHN0YXJ0czp7ZW5kOiJgIixyZXR1cm5FbmQ6ZmFsc2UsY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRSxFXSxzdWJMYW5ndWFnZToieG1sIn19LGc9e2JlZ2luOiJjc3NgIixlbmQ6IiIsc3RhcnRzOntlbmQ6ImAiLHJldHVybkVuZDpmYWxzZSxjb250YWluczpbdC5CQUNLU0xBU0hfRVNDQVBFLEVdLHN1Ykxhbmd1YWdlOiJjc3MifX0sdT17Y2xhc3NOYW1lOiJzdHJpbmciLGJlZ2luOiJgIixlbmQ6ImAiLGNvbnRhaW5zOlt0LkJBQ0tTTEFTSF9FU0NBUEUsRV19O0UuY29udGFpbnM9W3QuQVBPU19TVFJJTkdfTU9ERSx0LlFVT1RFX1NUUklOR19NT0RFLGQsZyx1LGwsdC5SRUdFWFBfTU9ERV07dmFyIGI9RS5jb250YWlucy5jb25jYXQoW3tiZWdpbjovXCgvLGVuZDovXCkvLGNvbnRhaW5zOlsic2VsZiJdLmNvbmNhdChFLmNvbnRhaW5zLFt0LkNfQkxPQ0tfQ09NTUVOVF9NT0RFLHQuQ19MSU5FX0NPTU1FTlRfTU9ERV0pfSx0LkNfQkxPQ0tfQ09NTUVOVF9NT0RFLHQuQ19MSU5FX0NPTU1FTlRfTU9ERV0pLF89e2NsYXNzTmFtZToicGFyYW1zIixiZWdpbjovXCgvLGVuZDovXCkvLGV4Y2x1ZGVCZWdpbjp0cnVlLGV4Y2x1ZGVFbmQ6dHJ1ZSxjb250YWluczpifTtyZXR1cm4ge25hbWU6IkphdmFTY3JpcHQiLGFsaWFzZXM6WyJqcyIsImpzeCIsIm1qcyIsImNqcyJdLGtleXdvcmRzOm8sY29udGFpbnM6W3QuU0hFQkFORyh7YmluYXJ5OiJub2RlIixyZWxldmFuY2U6NX0pLHtjbGFzc05hbWU6Im1ldGEiLHJlbGV2YW5jZToxMCxiZWdpbjovXlxzKlsnIl11c2UgKHN0cmljdHxhc20pWyciXS99LHQuQVBPU19TVFJJTkdfTU9ERSx0LlFVT1RFX1NUUklOR19NT0RFLGQsZyx1LHQuQ19MSU5FX0NPTU1FTlRfTU9ERSx0LkNPTU1FTlQoIi9cXCpcXCoiLCJcXCovIix7cmVsZXZhbmNlOjAsY29udGFpbnM6W3tjbGFzc05hbWU6ImRvY3RhZyIsYmVnaW46IkBbQS1aYS16XSsiLGNvbnRhaW5zOlt7Y2xhc3NOYW1lOiJ0eXBlIixiZWdpbjoiXFx7IixlbmQ6IlxcfSIscmVsZXZhbmNlOjB9LHtjbGFzc05hbWU6InZhcmlhYmxlIixiZWdpbjppKyIoPz1cXHMqKC0pfCQpIixlbmRzUGFyZW50OnRydWUscmVsZXZhbmNlOjB9LHtiZWdpbjovKD89W15cbl0pXHMvLHJlbGV2YW5jZTowfV19XX0pLHQuQ19CTE9DS19DT01NRU5UX01PREUsbCx7YmVnaW46cigvW3ssXG5dXHMqLyxzKHIoLygoKFwvXC8uKil8KFwvXCooLnxcbikqXCpcLykpXHMqKSovLGkrIlxccyo6IikpKSxyZWxldmFuY2U6MCxjb250YWluczpbe2NsYXNzTmFtZToiYXR0ciIsYmVnaW46aStzKCJcXHMqOiIpLHJlbGV2YW5jZTowfV19LHtiZWdpbjoiKCIrdC5SRV9TVEFSVEVSU19SRSsifFxcYihjYXNlfHJldHVybnx0aHJvdylcXGIpXFxzKiIsa2V5d29yZHM6InJldHVybiB0aHJvdyBjYXNlIixjb250YWluczpbdC5DX0xJTkVfQ09NTUVOVF9NT0RFLHQuQ19CTE9DS19DT01NRU5UX01PREUsdC5SRUdFWFBfTU9ERSx7Y2xhc3NOYW1lOiJmdW5jdGlvbiIsYmVnaW46IihcXChbXihdKihcXChbXihdKihcXChbXihdKlxcKSk/XFwpKT9cXCl8Iit0LlVOREVSU0NPUkVfSURFTlRfUkUrIilcXHMqPT4iLHJldHVybkJlZ2luOnRydWUsZW5kOiJcXHMqPT4iLGNvbnRhaW5zOlt7Y2xhc3NOYW1lOiJwYXJhbXMiLHZhcmlhbnRzOlt7YmVnaW46dC5VTkRFUlNDT1JFX0lERU5UX1JFfSx7Y2xhc3NOYW1lOm51bGwsYmVnaW46L1woXHMqXCkvLHNraXA6dHJ1ZX0se2JlZ2luOi9cKC8sZW5kOi9cKS8sZXhjbHVkZUJlZ2luOnRydWUsZXhjbHVkZUVuZDp0cnVlLGtleXdvcmRzOm8sY29udGFpbnM6Yn1dfV19LHtiZWdpbjovLC8scmVsZXZhbmNlOjB9LHtjbGFzc05hbWU6IiIsYmVnaW46L1xzLyxlbmQ6L1xzKi8sc2tpcDp0cnVlfSx7dmFyaWFudHM6W3tiZWdpbjoiPD4iLGVuZDoiPC8+In0se2JlZ2luOmMuYmVnaW4sZW5kOmMuZW5kfV0sc3ViTGFuZ3VhZ2U6InhtbCIsY29udGFpbnM6W3tiZWdpbjpjLmJlZ2luLGVuZDpjLmVuZCxza2lwOnRydWUsY29udGFpbnM6WyJzZWxmIl19XX1dLHJlbGV2YW5jZTowfSx7Y2xhc3NOYW1lOiJmdW5jdGlvbiIsYmVnaW5LZXl3b3JkczoiZnVuY3Rpb24iLGVuZDovXHsvLGV4Y2x1ZGVFbmQ6dHJ1ZSxjb250YWluczpbdC5pbmhlcml0KHQuVElUTEVfTU9ERSx7YmVnaW46aX0pLF9dLGlsbGVnYWw6L1xbfCUvfSx7YmVnaW46L1wkWyguXS99LHQuTUVUSE9EX0dVQVJELHtjbGFzc05hbWU6ImNsYXNzIixiZWdpbktleXdvcmRzOiJjbGFzcyIsZW5kOi9bezs9XS8sZXhjbHVkZUVuZDp0cnVlLGlsbGVnYWw6L1s6IlxbXF1dLyxjb250YWluczpbe2JlZ2luS2V5d29yZHM6ImV4dGVuZHMifSx0LlVOREVSU0NPUkVfVElUTEVfTU9ERV19LHtiZWdpbktleXdvcmRzOiJjb25zdHJ1Y3RvciIsZW5kOi9cey8sZXhjbHVkZUVuZDp0cnVlfSx7YmVnaW46IihnZXR8c2V0KVxccysoPz0iK2krIlxcKCkiLGVuZDovey8sa2V5d29yZHM6ImdldCBzZXQiLGNvbnRhaW5zOlt0LmluaGVyaXQodC5USVRMRV9NT0RFLHtiZWdpbjppfSkse2JlZ2luOi9cKFwpL30sX119XSxpbGxlZ2FsOi8jKD8hISkvfX19KCkpOwoJaGxqcy5yZWdpc3Rlckxhbmd1YWdlKCJqc29uIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgZT17bGl0ZXJhbDoidHJ1ZSBmYWxzZSBudWxsIn0saT1bbi5DX0xJTkVfQ09NTUVOVF9NT0RFLG4uQ19CTE9DS19DT01NRU5UX01PREVdLHQ9W24uUVVPVEVfU1RSSU5HX01PREUsbi5DX05VTUJFUl9NT0RFXSxhPXtlbmQ6IiwiLGVuZHNXaXRoUGFyZW50OnRydWUsZXhjbHVkZUVuZDp0cnVlLGNvbnRhaW5zOnQsa2V5d29yZHM6ZX0sbD17YmVnaW46InsiLGVuZDoifSIsY29udGFpbnM6W3tjbGFzc05hbWU6ImF0dHIiLGJlZ2luOi8iLyxlbmQ6LyIvLGNvbnRhaW5zOltuLkJBQ0tTTEFTSF9FU0NBUEVdLGlsbGVnYWw6IlxcbiJ9LG4uaW5oZXJpdChhLHtiZWdpbjovOi99KV0uY29uY2F0KGkpLGlsbGVnYWw6IlxcUyJ9LHM9e2JlZ2luOiJcXFsiLGVuZDoiXFxdIixjb250YWluczpbbi5pbmhlcml0KGEpXSxpbGxlZ2FsOiJcXFMifTtyZXR1cm4gdC5wdXNoKGwscyksaS5mb3JFYWNoKChmdW5jdGlvbihuKXt0LnB1c2gobik7fSkpLHtuYW1lOiJKU09OIixjb250YWluczp0LGtleXdvcmRzOmUsaWxsZWdhbDoiXFxTIn19fSgpKTsKCWhsanMucmVnaXN0ZXJMYW5ndWFnZSgieG1sIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj17Y2xhc3NOYW1lOiJzeW1ib2wiLGJlZ2luOiImW2Etel0rO3wmI1swLTldKzt8JiN4W2EtZjAtOV0rOyJ9LGE9e2JlZ2luOiJcXHMiLGNvbnRhaW5zOlt7Y2xhc3NOYW1lOiJtZXRhLWtleXdvcmQiLGJlZ2luOiIjP1thLXpfXVthLXoxLTlfLV0rIixpbGxlZ2FsOiJcXG4ifV19LHM9ZS5pbmhlcml0KGEse2JlZ2luOiJcXCgiLGVuZDoiXFwpIn0pLHQ9ZS5pbmhlcml0KGUuQVBPU19TVFJJTkdfTU9ERSx7Y2xhc3NOYW1lOiJtZXRhLXN0cmluZyJ9KSxpPWUuaW5oZXJpdChlLlFVT1RFX1NUUklOR19NT0RFLHtjbGFzc05hbWU6Im1ldGEtc3RyaW5nIn0pLGM9e2VuZHNXaXRoUGFyZW50OnRydWUsaWxsZWdhbDovPC8scmVsZXZhbmNlOjAsY29udGFpbnM6W3tjbGFzc05hbWU6ImF0dHIiLGJlZ2luOiJbQS1aYS16MC05XFwuXzotXSsiLHJlbGV2YW5jZTowfSx7YmVnaW46Lz1ccyovLHJlbGV2YW5jZTowLGNvbnRhaW5zOlt7Y2xhc3NOYW1lOiJzdHJpbmciLGVuZHNQYXJlbnQ6dHJ1ZSx2YXJpYW50czpbe2JlZ2luOi8iLyxlbmQ6LyIvLGNvbnRhaW5zOltuXX0se2JlZ2luOi8nLyxlbmQ6LycvLGNvbnRhaW5zOltuXX0se2JlZ2luOi9bXlxzIic9PD5gXSsvfV19XX1dfTtyZXR1cm4ge25hbWU6IkhUTUwsIFhNTCIsYWxpYXNlczpbImh0bWwiLCJ4aHRtbCIsInJzcyIsImF0b20iLCJ4amIiLCJ4c2QiLCJ4c2wiLCJwbGlzdCIsIndzZiIsInN2ZyJdLGNhc2VfaW5zZW5zaXRpdmU6dHJ1ZSxjb250YWluczpbe2NsYXNzTmFtZToibWV0YSIsYmVnaW46IjwhW2Etel0iLGVuZDoiPiIscmVsZXZhbmNlOjEwLGNvbnRhaW5zOlthLGksdCxzLHtiZWdpbjoiXFxbIixlbmQ6IlxcXSIsY29udGFpbnM6W3tjbGFzc05hbWU6Im1ldGEiLGJlZ2luOiI8IVthLXpdIixlbmQ6Ij4iLGNvbnRhaW5zOlthLHMsaSx0XX1dfV19LGUuQ09NTUVOVCgiXHgzYyEtLSIsIi0tXHgzZSIse3JlbGV2YW5jZToxMH0pLHtiZWdpbjoiPFxcIVxcW0NEQVRBXFxbIixlbmQ6IlxcXVxcXT4iLHJlbGV2YW5jZToxMH0sbix7Y2xhc3NOYW1lOiJtZXRhIixiZWdpbjovPFw/eG1sLyxlbmQ6L1w/Pi8scmVsZXZhbmNlOjEwfSx7Y2xhc3NOYW1lOiJ0YWciLGJlZ2luOiI8c3R5bGUoPz1cXHN8PikiLGVuZDoiPiIsa2V5d29yZHM6e25hbWU6InN0eWxlIn0sY29udGFpbnM6W2NdLHN0YXJ0czp7ZW5kOiI8L3N0eWxlPiIscmV0dXJuRW5kOnRydWUsc3ViTGFuZ3VhZ2U6WyJjc3MiLCJ4bWwiXX19LHtjbGFzc05hbWU6InRhZyIsYmVnaW46IjxzY3JpcHQoPz1cXHN8PikiLGVuZDoiPiIsa2V5d29yZHM6e25hbWU6InNjcmlwdCJ9LGNvbnRhaW5zOltjXSxzdGFydHM6e2VuZDoiPFwvc2NyaXB0PiIscmV0dXJuRW5kOnRydWUsc3ViTGFuZ3VhZ2U6WyJqYXZhc2NyaXB0IiwiaGFuZGxlYmFycyIsInhtbCJdfX0se2NsYXNzTmFtZToidGFnIixiZWdpbjoiPC8/IixlbmQ6Ii8/PiIsY29udGFpbnM6W3tjbGFzc05hbWU6Im5hbWUiLGJlZ2luOi9bXlwvPjxcc10rLyxyZWxldmFuY2U6MH0sY119XX19fSgpKTsKCWhsanMucmVnaXN0ZXJMYW5ndWFnZSgibWFya2Rvd24iLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKG4pe2NvbnN0IGU9e2JlZ2luOiI8IixlbmQ6Ij4iLHN1Ykxhbmd1YWdlOiJ4bWwiLHJlbGV2YW5jZTowfSxhPXtiZWdpbjoiXFxbLis/XFxdW1xcKFxcW10uKj9bXFwpXFxdXSIscmV0dXJuQmVnaW46dHJ1ZSxjb250YWluczpbe2NsYXNzTmFtZToic3RyaW5nIixiZWdpbjoiXFxbIixlbmQ6IlxcXSIsZXhjbHVkZUJlZ2luOnRydWUscmV0dXJuRW5kOnRydWUscmVsZXZhbmNlOjB9LHtjbGFzc05hbWU6ImxpbmsiLGJlZ2luOiJcXF1cXCgiLGVuZDoiXFwpIixleGNsdWRlQmVnaW46dHJ1ZSxleGNsdWRlRW5kOnRydWV9LHtjbGFzc05hbWU6InN5bWJvbCIsYmVnaW46IlxcXVxcWyIsZW5kOiJcXF0iLGV4Y2x1ZGVCZWdpbjp0cnVlLGV4Y2x1ZGVFbmQ6dHJ1ZX1dLHJlbGV2YW5jZToxMH0saT17Y2xhc3NOYW1lOiJzdHJvbmciLGNvbnRhaW5zOltdLHZhcmlhbnRzOlt7YmVnaW46L197Mn0vLGVuZDovX3syfS99LHtiZWdpbjovXCp7Mn0vLGVuZDovXCp7Mn0vfV19LHM9e2NsYXNzTmFtZToiZW1waGFzaXMiLGNvbnRhaW5zOltdLHZhcmlhbnRzOlt7YmVnaW46L1wqKD8hXCopLyxlbmQ6L1wqL30se2JlZ2luOi9fKD8hXykvLGVuZDovXy8scmVsZXZhbmNlOjB9XX07aS5jb250YWlucy5wdXNoKHMpLHMuY29udGFpbnMucHVzaChpKTt2YXIgYz1bZSxhXTtyZXR1cm4gaS5jb250YWlucz1pLmNvbnRhaW5zLmNvbmNhdChjKSxzLmNvbnRhaW5zPXMuY29udGFpbnMuY29uY2F0KGMpLHtuYW1lOiJNYXJrZG93biIsYWxpYXNlczpbIm1kIiwibWtkb3duIiwibWtkIl0sY29udGFpbnM6W3tjbGFzc05hbWU6InNlY3Rpb24iLHZhcmlhbnRzOlt7YmVnaW46Il4jezEsNn0iLGVuZDoiJCIsY29udGFpbnM6Yz1jLmNvbmNhdChpLHMpfSx7YmVnaW46Iig/PV4uKz9cXG5bPS1dezIsfSQpIixjb250YWluczpbe2JlZ2luOiJeWz0tXSokIn0se2JlZ2luOiJeIixlbmQ6IlxcbiIsY29udGFpbnM6Y31dfV19LGUse2NsYXNzTmFtZToiYnVsbGV0IixiZWdpbjoiXlsgXHRdKihbKistXXwoXFxkK1xcLikpKD89XFxzKykiLGVuZDoiXFxzKyIsZXhjbHVkZUVuZDp0cnVlfSxpLHMse2NsYXNzTmFtZToicXVvdGUiLGJlZ2luOiJePlxccysiLGNvbnRhaW5zOmMsZW5kOiIkIn0se2NsYXNzTmFtZToiY29kZSIsdmFyaWFudHM6W3tiZWdpbjoiKGB7Myx9KSgufFxcbikqP1xcMWAqWyBdKiJ9LHtiZWdpbjoiKH57Myx9KSgufFxcbikqP1xcMX4qWyBdKiJ9LHtiZWdpbjoiYGBgIixlbmQ6ImBgYCtbIF0qJCJ9LHtiZWdpbjoifn5+IixlbmQ6In5+fitbIF0qJCJ9LHtiZWdpbjoiYC4rP2AifSx7YmVnaW46Iig/PV4oIHs0fXxcXHQpKSIsY29udGFpbnM6W3tiZWdpbjoiXiggezR9fFxcdCkiLGVuZDoiKFxcbikkIn1dLHJlbGV2YW5jZTowfV19LHtiZWdpbjoiXlstXFwqXXszLH0iLGVuZDoiJCJ9LGEse2JlZ2luOi9eXFtbXlxuXStcXTovLHJldHVybkJlZ2luOnRydWUsY29udGFpbnM6W3tjbGFzc05hbWU6InN5bWJvbCIsYmVnaW46L1xbLyxlbmQ6L1xdLyxleGNsdWRlQmVnaW46dHJ1ZSxleGNsdWRlRW5kOnRydWV9LHtjbGFzc05hbWU6ImxpbmsiLGJlZ2luOi86XHMqLyxlbmQ6LyQvLGV4Y2x1ZGVCZWdpbjp0cnVlfV19XX19fSgpKTsKCWhsanMucmVnaXN0ZXJMYW5ndWFnZSgicHl0aG9uIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj17a2V5d29yZDoiYW5kIGVsaWYgaXMgZ2xvYmFsIGFzIGluIGlmIGZyb20gcmFpc2UgZm9yIGV4Y2VwdCBmaW5hbGx5IHByaW50IGltcG9ydCBwYXNzIHJldHVybiBleGVjIGVsc2UgYnJlYWsgbm90IHdpdGggY2xhc3MgYXNzZXJ0IHlpZWxkIHRyeSB3aGlsZSBjb250aW51ZSBkZWwgb3IgZGVmIGxhbWJkYSBhc3luYyBhd2FpdCBub25sb2NhbHwxMCIsYnVpbHRfaW46IkVsbGlwc2lzIE5vdEltcGxlbWVudGVkIixsaXRlcmFsOiJGYWxzZSBOb25lIFRydWUifSxhPXtjbGFzc05hbWU6Im1ldGEiLGJlZ2luOi9eKD4+PnxcLlwuXC4pIC99LGk9e2NsYXNzTmFtZToic3Vic3QiLGJlZ2luOi9cey8sZW5kOi9cfS8sa2V5d29yZHM6bixpbGxlZ2FsOi8jL30scz17YmVnaW46L1x7XHsvLHJlbGV2YW5jZTowfSxyPXtjbGFzc05hbWU6InN0cmluZyIsY29udGFpbnM6W2UuQkFDS1NMQVNIX0VTQ0FQRV0sdmFyaWFudHM6W3tiZWdpbjovKHV8Yik/cj8nJycvLGVuZDovJycnLyxjb250YWluczpbZS5CQUNLU0xBU0hfRVNDQVBFLGFdLHJlbGV2YW5jZToxMH0se2JlZ2luOi8odXxiKT9yPyIiIi8sZW5kOi8iIiIvLGNvbnRhaW5zOltlLkJBQ0tTTEFTSF9FU0NBUEUsYV0scmVsZXZhbmNlOjEwfSx7YmVnaW46LyhmcnxyZnxmKScnJy8sZW5kOi8nJycvLGNvbnRhaW5zOltlLkJBQ0tTTEFTSF9FU0NBUEUsYSxzLGldfSx7YmVnaW46LyhmcnxyZnxmKSIiIi8sZW5kOi8iIiIvLGNvbnRhaW5zOltlLkJBQ0tTTEFTSF9FU0NBUEUsYSxzLGldfSx7YmVnaW46Lyh1fHJ8dXIpJy8sZW5kOi8nLyxyZWxldmFuY2U6MTB9LHtiZWdpbjovKHV8cnx1cikiLyxlbmQ6LyIvLHJlbGV2YW5jZToxMH0se2JlZ2luOi8oYnxiciknLyxlbmQ6LycvfSx7YmVnaW46LyhifGJyKSIvLGVuZDovIi99LHtiZWdpbjovKGZyfHJmfGYpJy8sZW5kOi8nLyxjb250YWluczpbZS5CQUNLU0xBU0hfRVNDQVBFLHMsaV19LHtiZWdpbjovKGZyfHJmfGYpIi8sZW5kOi8iLyxjb250YWluczpbZS5CQUNLU0xBU0hfRVNDQVBFLHMsaV19LGUuQVBPU19TVFJJTkdfTU9ERSxlLlFVT1RFX1NUUklOR19NT0RFXX0sbD17Y2xhc3NOYW1lOiJudW1iZXIiLHJlbGV2YW5jZTowLHZhcmlhbnRzOlt7YmVnaW46ZS5CSU5BUllfTlVNQkVSX1JFKyJbbExqSl0/In0se2JlZ2luOiJcXGIoMG9bMC03XSspW2xMakpdPyJ9LHtiZWdpbjplLkNfTlVNQkVSX1JFKyJbbExqSl0/In1dfSx0PXtjbGFzc05hbWU6InBhcmFtcyIsdmFyaWFudHM6W3tiZWdpbjovXChccypcKS8sc2tpcDp0cnVlLGNsYXNzTmFtZTpudWxsfSx7YmVnaW46L1woLyxlbmQ6L1wpLyxleGNsdWRlQmVnaW46dHJ1ZSxleGNsdWRlRW5kOnRydWUsY29udGFpbnM6WyJzZWxmIixhLGwscixlLkhBU0hfQ09NTUVOVF9NT0RFXX1dfTtyZXR1cm4gaS5jb250YWlucz1bcixsLGFdLHtuYW1lOiJQeXRob24iLGFsaWFzZXM6WyJweSIsImd5cCIsImlweXRob24iXSxrZXl3b3JkczpuLGlsbGVnYWw6Lyg8XC98LT58XD8pfD0+Lyxjb250YWluczpbYSxsLHtiZWdpbktleXdvcmRzOiJpZiIscmVsZXZhbmNlOjB9LHIsZS5IQVNIX0NPTU1FTlRfTU9ERSx7dmFyaWFudHM6W3tjbGFzc05hbWU6ImZ1bmN0aW9uIixiZWdpbktleXdvcmRzOiJkZWYifSx7Y2xhc3NOYW1lOiJjbGFzcyIsYmVnaW5LZXl3b3JkczoiY2xhc3MifV0sZW5kOi86LyxpbGxlZ2FsOi9bJHs9O1xuLF0vLGNvbnRhaW5zOltlLlVOREVSU0NPUkVfVElUTEVfTU9ERSx0LHtiZWdpbjovLT4vLGVuZHNXaXRoUGFyZW50OnRydWUsa2V5d29yZHM6Ik5vbmUifV19LHtjbGFzc05hbWU6Im1ldGEiLGJlZ2luOi9eW1x0IF0qQC8sZW5kOi8kL30se2JlZ2luOi9cYihwcmludHxleGVjKVwoL31dfX19KCkpOwoJaGxqcy5yZWdpc3Rlckxhbmd1YWdlKCJ5YW1sIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj0idHJ1ZSBmYWxzZSB5ZXMgbm8gbnVsbCIsYT0iW1xcdyM7Lz86QCY9KyQsLn4qXFwnKClbXFxdXSsiLHM9e2NsYXNzTmFtZToic3RyaW5nIixyZWxldmFuY2U6MCx2YXJpYW50czpbe2JlZ2luOi8nLyxlbmQ6LycvfSx7YmVnaW46LyIvLGVuZDovIi99LHtiZWdpbjovXFMrL31dLGNvbnRhaW5zOltlLkJBQ0tTTEFTSF9FU0NBUEUse2NsYXNzTmFtZToidGVtcGxhdGUtdmFyaWFibGUiLHZhcmlhbnRzOlt7YmVnaW46Int7IixlbmQ6In19In0se2JlZ2luOiIleyIsZW5kOiJ9In1dfV19LGk9ZS5pbmhlcml0KHMse3ZhcmlhbnRzOlt7YmVnaW46LycvLGVuZDovJy99LHtiZWdpbjovIi8sZW5kOi8iL30se2JlZ2luOi9bXlxzLHt9W1xdXSsvfV19KSxsPXtlbmQ6IiwiLGVuZHNXaXRoUGFyZW50OnRydWUsZXhjbHVkZUVuZDp0cnVlLGNvbnRhaW5zOltdLGtleXdvcmRzOm4scmVsZXZhbmNlOjB9LHQ9e2JlZ2luOiJ7IixlbmQ6In0iLGNvbnRhaW5zOltsXSxpbGxlZ2FsOiJcXG4iLHJlbGV2YW5jZTowfSxnPXtiZWdpbjoiXFxbIixlbmQ6IlxcXSIsY29udGFpbnM6W2xdLGlsbGVnYWw6IlxcbiIscmVsZXZhbmNlOjB9LGI9W3tjbGFzc05hbWU6ImF0dHIiLHZhcmlhbnRzOlt7YmVnaW46Ilxcd1tcXHcgOlxcLy4tXSo6KD89WyBcdF18JCkifSx7YmVnaW46JyJcXHdbXFx3IDpcXC8uLV0qIjooPz1bIFx0XXwkKSd9LHtiZWdpbjoiJ1xcd1tcXHcgOlxcLy4tXSonOig/PVsgXHRdfCQpIn1dfSx7Y2xhc3NOYW1lOiJtZXRhIixiZWdpbjoiXi0tLXMqJCIscmVsZXZhbmNlOjEwfSx7Y2xhc3NOYW1lOiJzdHJpbmciLGJlZ2luOiJbXFx8Pl0oWzAtOV0/WystXSk/WyBdKlxcbiggKilbXFxTIF0rXFxuKFxcMltcXFMgXStcXG4/KSoifSx7YmVnaW46IjwlWyU9LV0/IixlbmQ6IlslLV0/JT4iLHN1Ykxhbmd1YWdlOiJydWJ5IixleGNsdWRlQmVnaW46dHJ1ZSxleGNsdWRlRW5kOnRydWUscmVsZXZhbmNlOjB9LHtjbGFzc05hbWU6InR5cGUiLGJlZ2luOiIhXFx3KyEiK2F9LHtjbGFzc05hbWU6InR5cGUiLGJlZ2luOiIhPCIrYSsiPiJ9LHtjbGFzc05hbWU6InR5cGUiLGJlZ2luOiIhIithfSx7Y2xhc3NOYW1lOiJ0eXBlIixiZWdpbjoiISEiK2F9LHtjbGFzc05hbWU6Im1ldGEiLGJlZ2luOiImIitlLlVOREVSU0NPUkVfSURFTlRfUkUrIiQifSx7Y2xhc3NOYW1lOiJtZXRhIixiZWdpbjoiXFwqIitlLlVOREVSU0NPUkVfSURFTlRfUkUrIiQifSx7Y2xhc3NOYW1lOiJidWxsZXQiLGJlZ2luOiJcXC0oPz1bIF18JCkiLHJlbGV2YW5jZTowfSxlLkhBU0hfQ09NTUVOVF9NT0RFLHtiZWdpbktleXdvcmRzOm4sa2V5d29yZHM6e2xpdGVyYWw6bn19LHtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46IlxcYlswLTldezR9KC1bMC05XVswLTldKXswLDJ9KFtUdCBcXHRdWzAtOV1bMC05XT8oOlswLTldWzAtOV0pezJ9KT8oXFwuWzAtOV0qKT8oWyBcXHRdKSooWnxbLStdWzAtOV1bMC05XT8oOlswLTldWzAtOV0pPyk/XFxiIn0se2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjplLkNfTlVNQkVSX1JFKyJcXGIifSx0LGcsc10sYz1bLi4uYl07cmV0dXJuIGMucG9wKCksYy5wdXNoKGkpLGwuY29udGFpbnM9Yyx7bmFtZToiWUFNTCIsY2FzZV9pbnNlbnNpdGl2ZTp0cnVlLGFsaWFzZXM6WyJ5bWwiLCJZQU1MIl0sY29udGFpbnM6Yn19fSgpKTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvZGVXb3JrZXIuanMubWFwCgo=");class R extends u{constructor(t){super(t),this.setContent(t||this.innerHTML)}preprocess(t){return t}setContent(t){t=this.preprocess(t);let e=new v;e.onmessage=t=>{this.classList.add("hljs"),this.innerHTML=t.data},e.postMessage(t)}}customElements.define("ui-code",R);class T extends u{target;items=[];#s=new WeakMap;constructor(t=null){super("<section></section>"),this.hide=this.hide.bind(this),this.hide();for(let t of["click","contextmenu"])this.addEventListener(t,this.hide),this.firstElementChild.addEventListener(t,(t=>{t.stopPropagation()}));t&&this.for(t)}for(t){let e=e=>{e.preventDefault(),this.renderMenu(t,e.pageX,e.pageY)};return t.addEventListener("contextmenu",e),t.setAttribute("context-menu",""),this.#s.set(t,e),this}renderMenu(t,e,i){this.target=t;let s=window.innerWidth,l=window.innerHeight,n=e<.75*s,a=i<.5*l;this.style.left=n?e+"px":null,this.style.right=n?null:s-e+"px",this.style.top=a?i+"px":null,this.style.bottom=a?null:l-i+"px";let d=!1;for(let e of this.items)e.element.hidden=e.hide&&e.hide(t),d=d||!e.element.hidden;d&&this.show()}detach(t){let e=this.#s.get(t);e&&(t.removeAttribute("context-menu"),t.removeEventListener("contextmenu",e))}addItem(t,e,i){let s=n(`<div class="menu-item">${t}</div>`);return this.items.push({element:s,hide:i}),s.addEventListener("click",(()=>{e(this.target),this.hide()})),this.firstElementChild.appendChild(s),this}addSubMenu(t,e){let i=n(`<div class="menu-item has-sub-menu">${t}<div class="sub-menu"></div></div>`),s=i.querySelector(".sub-menu");this.items.push({element:i,hide:e}),i.addEventListener("click",(()=>{i.classList.toggle("show")})),this.firstElementChild.appendChild(i);const l={addItem:(t,e)=>{let i=n(`<div class="menu-item">${t}</div>`);return i.addEventListener("click",(t=>{t.stopPropagation(),e(this.target),this.hide(),i.classList.toggle("show",!1)})),s.append(i),l}};return l}addBreak(){return this.firstElementChild.appendChild(n("<hr/>")),this}clearMenuItems(){this.items=[],this.firstElementChild.innerHTML=""}}customElements.define("ui-context",T);class g extends u{#l=0;#n=0;constructor(t){super(),this.setAttribute("ui-grid",""),void 0!==t?.padding&&this.setCss("--padding",t?.padding),void 0!==t?.rowGap&&this.setCss("row-gap",t?.rowGap),void 0!==t?.columnGap&&this.setCss("column-gap",t?.columnGap)}get columns(){return this.#l}set columns(t){this.#l=t,this.setCss("--columns",t)}get rows(){return this.#n}set rows(t){this.#l=t,this.setCss("--rows",t)}put(t,e,i,s=1,l=1){this.rows<e+l-1&&(this.rows=e+l-1),this.columns<i+s-1&&(this.columns=i+s-1),Array.isArray(t)&&((t=new ot.BasicElement(t)).style.display="flex"),t.style.setProperty("grid-area",`${e} / ${i} / span ${l} / span ${s}`),this.append(t)}}customElements.define("ui-grid",g);class k extends u{obj;key;constructor(t,e,i){super(),this.obj=t,this.key=e,this.setAttribute("ui-input",""),i?.class&&(Array.isArray(i.class)?this.classList.add(...i.class):this.classList.add(i.class))}get value(){return Reflect.get(this.obj,this.key)}set value(t){Reflect.set(this.obj,this.key,t)}label(t){return new M(this,t,{wrapped:!0})}clear(){this.value=void 0}}class N extends HTMLInputElement{obj;key;constructor(t,e,i){super(),this.obj=t,this.key=e,this.setAttribute("ui-input",""),i?.class&&(Array.isArray(i.class)?this.classList.add(...i.class):this.classList.add(i.class))}label(t){return new M(this,t,{wrapped:!0})}clear(){Reflect.set(this.obj,this.key,void 0),this.value=null}}class U extends N{constructor(t,e,i){if(super(t,e,i),this.type="text",this.value=Reflect.get(t,e)??null,i?.size&&(this.style.width=24*i?.size+"px"),i?.color&&this.style.setProperty("--color",i?.color),i?.placeholder&&this.setAttribute("placeholder",i?.placeholder),i?.options){let t=async()=>{this.buildOptions(Array.isArray(i.options)?i.options:await i.options()),this.removeEventListener("mouseover",t)};this.addEventListener("mouseover",t)}this.addEventListener("change",(()=>{let s=this.value;Reflect.set(t,e,s),i?.callback&&i?.callback(s,this)}))}buildOptions(t){let e=l(),i=n(`<datalist id="${e}">`+t.map((t=>`<option value="${t.value?t.value:t}">${t.name?t.name:t}</option>`)).join("")+"</datalist>");document.body.append(i),this.addEventListener("focus",(()=>this.value="")),this.setAttribute("list",e)}}customElements.define("ui-stringinput",U,{extends:"input"});class H extends N{constructor(t,e,i){super(t,e,i),this.type="number",this.value=Reflect.get(t,e),i?.size&&(this.style.width=24*i?.size+"px"),i?.color&&this.style.setProperty("--color",i?.color),i?.placeholder&&this.setAttribute("placeholder",i?.placeholder),this.addEventListener("change",(()=>{let s=this.value,l=void 0!==s?parseFloat(this.value):s;Reflect.set(t,e,l),i?.callback&&i?.callback(l)}))}}customElements.define("ui-numberinput",H,{extends:"input"});class C extends k{input;constructor(t,e,i){super(t,e,i),this.innerHTML='<input type="range"/><div></div>',this.onselectstart=()=>!1,this.input=this.querySelector("input");let s=this.querySelector("div");this.setAttribute("ui-sliderinput",""),i?.size&&(this.style.width=24*i?.size+"px"),i?.color&&this.style.setProperty("--color",i?.color),this.input.setAttribute("min",(i?.min??0)+""),this.input.setAttribute("max",(i?.max??100)+""),this.input.setAttribute("step",(i?.step??1)+""),this.input.value=Reflect.get(t,e),s.innerHTML=i?.displayFunc?i.displayFunc(this.value):""+this.value,this.input.addEventListener("input",(()=>{let l=this.input.valueAsNumber;Reflect.set(t,e,l),s.innerHTML=i?.displayFunc?i.displayFunc(this.value):""+this.value,i?.callback&&i?.callback(l)}))}update(){this.input.value=Reflect.get(this.obj,this.key)}}customElements.define("ui-sliderinput",C);class z extends HTMLSelectElement{_value=null;obj;key;constructor(t,e,i={options:[]}){super(),this.obj=t,this.key=e,this.setAttribute("ui-input",""),i?.size&&(this.style.width=24*i?.size+"px"),i?.color&&this.style.setProperty("--color",i?.color),i?.placeholder&&this.setAttribute("placeholder",i?.placeholder),this.addEventListener("change",(()=>{let t=this.value;this.setValue(t),i?.callback&&i?.callback(t)})),this.renderOptions(i.options)}getValue(){return Reflect.get(this.obj,this.key)??null}setValue(t){Reflect.set(this.obj,this.key,t)}async renderOptions(t){let e=null;e="function"==typeof t?await t():t;let i=this.getValue();this.innerHTML="";for(let t of e){let e=document.createElement("option");"object"==typeof t&&"display"in t?(t.value==i&&e.setAttribute("selected",""),e.innerText=t.display??t.value,e.value=""+t.value):(t==i&&e.setAttribute("selected",""),e.innerText=""+t),this.append(e)}}label(t){return new M(this,t,{wrapped:!0})}}customElements.define("ui-selectinput",z,{extends:"select"});class K extends k{options;list;constructor(t,e,i){super(t,e),this.options=i,Array.isArray(this.value)||(this.value=[]);let s=document.createElement("content");this.list=s,this.append(s);let l=document.createElement("select");l.innerHTML="<option selected disabled hidden>Add...</option>"+i.options.map((t=>`<option>${t}</option>`)).join(""),l.addEventListener("change",(()=>{this.value.push(l.value),l.value="Add...",this.renderList(),this.options.callback?.()})),this.append(l),this.renderList()}renderList(){this.list.innerHTML="",this.list.append(...this.value.map(((t,e)=>{let i=new Y(t);return i.append(new h("",(()=>{this.value.splice(e,1),this.renderList(),this.options.callback?.()}),{icon:"fa-times",style:"text",color:"error-color"})),i})))}}customElements.define("ui-multiselectinput",K);class w extends k{options;list;constructor(t,e,i){super(t,e),this.options=i,Array.isArray(this.value)||(this.value=[]);let s=document.createElement("content");this.list=s,this.append(s);let l=()=>{this.value.push(n.value),n.value="",this.renderList(),this.options.callback?.()};let n=new U({value:""},"value",{});n.addEventListener("keypress",(t=>{"Enter"==t.key&&l()}));let a=new at;a.append(n),a.append(new h("Add",l)),i.clearButton&&a.append(new h("Clear",(()=>{this.value=[],this.renderList()}),{clazz:"delete"})),this.append(a),this.renderList()}renderList(){this.list.innerHTML="",this.list.append(...this.value.map(((t,e)=>{let i=new Y(t);return i.append(new h("",(()=>{this.value.splice(e,1),this.renderList(),this.options.callback?.()}),{icon:"fa-times",style:"text",color:"error-color"})),i})))}}customElements.define("ui-multistringinput",w);class O extends k{constructor(t,e){super(t,e);let i=document.createElement("textarea");i.onkeydown=t=>{if("Tab"==t.key){t.preventDefault();let e=i.selectionStart;this.value=this.value.substring(0,i.selectionStart)+"\t"+this.value.substring(i.selectionEnd),i.selectionEnd=e+1}};let s=()=>{i.style.height="1px",i.style.height=i.scrollHeight+"px"};i.onkeyup=s,i.addEventListener("change",(()=>{try{let t=JSON.parse(i.value);this.value=t,this.classList.toggle("error",!1)}catch(t){this.classList.toggle("error",!0)}})),i.value=JSON.stringify(this.value??"",null,"\t"),this.append(i),setTimeout(s,10)}}customElements.define("ui-json-input",O);class j extends k{constructor(t,e){super(t,e);let i=document.createElement("textarea"),s=()=>{i.style.height="1px",i.style.height=i.scrollHeight+"px"};i.onkeyup=s,i.addEventListener("change",(()=>{this.value=i.value})),i.value=this.value??"",this.append(i),setTimeout(s,10)}}customElements.define("ui-text-input",j);class E extends k{options;input;unset;constructor(t,e,i){super(t,e),this.options=i,this.innerHTML='<input type="checkbox"/><div><span></span></div>',this.setAttribute("ui-toggle",""),this.options?.allowUnset&&null==super.value&&(this.unset=!0,this.classList.toggle("indeterminate",this.unset)),this.input=this.querySelector("input"),this.input.checked=this.value,this.querySelector("input").addEventListener("change",(()=>{this.value=this.input.checked}))}get value(){return this.options?.allowUnset&&this.unset?null:super.value}set value(t){this.options?.allowUnset&&void 0===t?this.unset=!0:this.unset=!1,this.classList.toggle("indeterminate",this.unset),super.value=t}update(){this.input.checked=this.value}}customElements.define("ui-toggleinput",E);class M extends HTMLLabelElement{input;constructor(t,e,{wrapped:i=!1,clearable:s=!1}={}){if(super(),this.setAttribute("ui-label",""),i)this.innerHTML=`<span class="label">${e}</span>`;else{let i=t.id;null==i&&(i=l(),t.id=i),this.setAttribute("for",i),this.innerText=e}s&&this.append(new ot.Button("",(e=>{t.clear(),e.preventDefault(),e.stopPropagation()}),{icon:"fa-times",style:"text"})),i&&this.append(t),this.input=t}get value(){return this.input.value}set value(t){this.input.value=t}}customElements.define("ui-label",M,{extends:"label"});class P extends M{constructor(t,e,i,s){super(new i(t,e,s),s?.name??e,{wrapped:!0})}}customElements.define("ui-labelledinput",P,{extends:"label"});class Q extends g{json;constructor(t,e,i){super(),this.json=e,this.build(t,e)}build(t,e){console.log("build",t,e);for(let i of Object.keys(t)){let s=t[i];if("function"==typeof s)this.append(new P(e,i,s));else if(Array.isArray(s))this.append(new P(e,i,s[0],s[1]));else{let t=Reflect.get(e,i);null==t&&(t={},Reflect.set(e,i,t)),this.build(s,t)}}}get value(){return this.json}}customElements.define("ui-form2",Q);class B{path;pathVariables=[];func;constructor(t,e){for(;t.includes("{");){let e=t.substring(t.indexOf("{"),t.indexOf("}")+1);t=t.replace(e,"([^/]*)"),this.pathVariables.push(B.v(e.substring(1,e.length-1)))}this.path=new RegExp(t),this.func=e}static v(t){let[e,i]=t.split(":");return{name:e,set:(t,s)=>{if(s){switch(i){case"number":s=parseFloat(s);break;case"boolean":s="true"==s.toLowerCase();break;case"json":s=JSON.parse(s)}t[e]=s}}}}async handle(t,e){let i=t.match(this.path);if(!i||i[0].length!=t.length)return!1;let s={};i.shift();for(let t of this.pathVariables)t.set(s,i.shift());return await this.func(s)}}class D extends u{key=null;hash=null;depth=0;eventlistener;handlers=[];position=[0,0];static DIRECTION={NONE:0,LEFT:1,RIGHT:2,BOTTOM:3,TOP:4,RANDOM:100};static Handler=B;constructor(t=null){super(),this.key=t,this.eventlistener=()=>this.hashChange(),window.addEventListener("hashchange",this.eventlistener)}static hashPairs(){return window.location.hash.substring(1).replaceAll("%7C","|").replaceAll("%7c","|").split("|").filter((t=>""!=t)).map((t=>t.includes("=")?t.split("=",2):[null,t]))}static read(t){let[e,i]=t?t.split(":"):[null],s=D.hashPairs().find((t=>t[0]==e)),l=s?.[1];if(l)switch(i){case"number":l=parseFloat(l);break;case"boolean":l="true"==l.toLowerCase();break;case"json":l=JSON.parse(l)}return l}static write(t,e,i=!1){let[s,l]=t?t.split(":"):[null],n=D.hashPairs();if(null!==e&&""!==e){let t=n.find((t=>t[0]==s));null==t&&(t=[s,null],n.push(t)),"json"==l&&(e=JSON.stringify(e)),t[1]=e}else n=n.filter((t=>t[0]!=s));i?history.replaceState(void 0,void 0,"#"+n.map((t=>t[0]?t.join("="):t[1])).join("|")):window.location.hash=n.map((t=>t[0]?t.join("="):t[1])).join("|")}remove(){return super.remove(),window.removeEventListener("hashchange",this.eventlistener),this}get value(){return this.hash}handler(t,e){return this.handlers.push(new B(t,e)),this}addHandler(t){this.handlers.push(t)}set(t,e=!1,i=!1){if(D.write(this.key,t,i),e)return this.hashChange()}async hashChange(){let t=D.hashPairs().find((t=>t[0]==this.key));null==t&&(t=[this.key,""]);let e=t[1],i=this.hash;if(this.hash=e,this.hash!=i)for(let t of this.handlers){let s=await t.handle(e,i);if(s){Array.isArray(s)?await this.swapContent(s[0],s[1]):await this.swapContent(s,null);break}}}async swapContent(i,l=D.DIRECTION.RIGHT){let n,a,d=document.createElement("content");if(e(d,i),null==this.firstElementChild)return this.appendChild(d);if(null==l)return this.firstElementChild.remove(),void this.appendChild(d);if(l==D.DIRECTION.RANDOM){let t=[D.DIRECTION.RIGHT,D.DIRECTION.LEFT,D.DIRECTION.TOP,D.DIRECTION.BOTTOM];l=t[Math.floor(s()*t.length)]}if(Array.isArray(l)){console.log(this.position,l);let t=l;l=this.position[0]!=l[0]?this.position[0]>l[0]?D.DIRECTION.LEFT:D.DIRECTION.RIGHT:this.position[1]!=l[1]?this.position[1]<l[1]?D.DIRECTION.BOTTOM:D.DIRECTION.TOP:D.DIRECTION.RIGHT,this.position=t}switch(l){case D.DIRECTION.RIGHT:[n,a]=["right","left"];break;case D.DIRECTION.LEFT:[n,a]=["left","right"];break;case D.DIRECTION.TOP:[n,a]=["top","bottom"];break;case D.DIRECTION.BOTTOM:[n,a]=["bottom","top"]}let c=this.cssNumber("--timing");d.classList.add(n),this.appendChild(d),t(50).then((()=>{d.classList.remove(n),this.firstElementChild.classList.add(a),setTimeout((()=>this.firstElementChild.remove()),c)}))}}customElements.define("ui-hash",D);class A extends R{constructor(t){super(t?"object"==typeof t?JSON.stringify(t,null,"\t"):JSON.stringify(JSON.parse(t),null,"\t"):null)}}customElements.define("ui-json",A);let q=0;class _ extends u{dedupeFunction;elementMap=new WeakMap;static ASC=!0;static DESC=!1;dirty=!0;_busy=!1;_sort=null;attrs={};listBody=null;_data=null;static ITEMS_COLUMNS_KEY="--item-columns";static ITEMS_PER_PAGE_KEY="--items-per-page";display;lookup;#a=[];_filterFunc;_itemDisplayFunc;pageNumber;constructor(t,e={}){super(),this.setAttribute("ui-list",""),this.innerHTML=this.listLayout,this.listBody=this.querySelector(".list"),this._sort=null,this._data=[],this.display=[],this.lookup={},this._filterFunc=null,this._itemDisplayFunc=t,this.pageNumber=0,e.itemColumns&&(this.itemColumns=e.itemColumns),e.itemsPerPage&&(this.itemsPerPage=e.itemsPerPage),e.dedupeFunction?(this.elementMap=new Map,this.dedupeFunction=e.dedupeFunction):this.dedupeFunction=t=>t}async notBusy(){for(;this._busy;)await t(10)}set itemColumns(t){this.setCss(_.ITEMS_COLUMNS_KEY,t)}get itemsPerPage(){return this.cssNumber(_.ITEMS_PER_PAGE_KEY)||24}set itemsPerPage(t){this.setCss(_.ITEMS_PER_PAGE_KEY,t)}get listLayout(){return'\n\t\x3c!-- pagination --\x3e\n\t<header>\n\t\t<span class="sort"></span>\n\t\t<span class="filter"></span>\n\t\t<ui-spacer></ui-spacer>\n\t\t<span class="paging top"></span>\n\t</header>\n\n\t<content class="list">\n\t</content>\n\n\t\x3c!-- pagination --\x3e\n\t<footer>\n\t\t<ui-spacer></ui-spacer>\n\t\t<div class="paging bottom"></div>\n\t</footer>'}set data(t){this._data=t,this.dirty=!0}get data(){return this._data}addAttribute(t,e=e=>e[t],i=e,s=null){return this.attrs[t]={id:q++,name:t,width:s,value:"string"==typeof e?t=>t[e]:e,displayFunc:"string"==typeof i?t=>t[i]:i,sortable:null!=e},this.dirty=!0,this}addAttr(t,e){let i=e.value??t,s=e.render??i,l={id:q++,name:t,width:e.display?.width,value:"string"==typeof i?t=>t[i]:i,displayFunc:"string"==typeof s?t=>t[s]:s,sortable:null!=i&&(e.display?.sortable??!0)};return this.attrs[t]=l,null!=i&&e.display?.filterable&&this.addFilter({attr:[t],value:"",suggest:"suggest"==e.display?.filterable}),this.dirty=!0,this}getFilters(){return this.#a}addFilter(t){return this.#a.push(t),this}#d(t){t:for(let e of this.#a)if(e.value){const i=e.value.toLocaleLowerCase();for(let s of e.attr){if((""+this.attrs[s]?.value(t)).toLowerCase().toLowerCase().includes(i))continue t}return!1}return!0}_filtered(t){return this.#d(t)&&(null==this._filterFunc||this._filterFunc(t))}filter(t=this._filterFunc){this._filterFunc=t,this.dirty=!0,this.notBusy().then((()=>this.page(0)))}sortDisplay(){let t=this.querySelector(".sort"),e=document.createElement("select");e.innerHTML=Object.values(this.attrs).map((t=>t.value?`<option value="${t.name}:asc" > ${t.name}</option>\n\t\t\t<option value="${t.name}:desc"> ${t.name}</option>`:"")).join(""),e.value=this._sort?`${this._sort.attr.name}:${this._sort.asc?"asc":"desc"}`:null,e.onchange=()=>{let t=e.value.split(":");this.sort(t[0],"asc"==t[1])},t.innerHTML="",t.appendChild(e),0!=Object.values(this.attrs).length&&0!=this.data.length||(t.style.display="none")}filterDisplay(){let t=this.querySelector(".filter");if(!t.hasChildNodes())for(let e of this.#a)t.append(new U(e,"value",{placeholder:"Search",callback:async t=>{this.dirty=!0,await this.page()}}));0!=Object.values(this.attrs).length&&0!=this.data.length||(t.style.display="none")}async render(t=!1){t&&(this.dirty=!0),this.sortDisplay(),this.filterDisplay(),await this.page()}async sort(t=this._sort?.attr,e=!this._sort?.asc){this.dirty=!0;let i="string"==typeof t?this.attrs[t]:t;this._sort=null==t?null:{attr:i,asc:e},0!=this.data.length&&await this.render()}async page(t=this.pageNumber){await this.notBusy(),this._busy=!0;try{this.dirty&&(this.display=[...this.data],this.display=this.display.filter((t=>this._filtered(t))),this._sort&&(this.display=this.display.sort(((t,e)=>{let i=t?this._sort.attr.value(t):null,s=e?this._sort.attr.value(e):null;if(i==s)return 0;let l=this._sort.asc?1:-1;return null==s?l:null==i?-l:"number"==typeof i&&"number"==typeof s?l*(i-s):l*(""+i).localeCompare(""+s,"en",{sensitivity:"base",ignorePunctuation:!0,numeric:!0})}))),this.dirty=!1,this.pageNumber=0);let e=this.display.length,i=this.itemsPerPage<1/0?Math.ceil(e/this.itemsPerPage):1,s=i>1;if(this.pageNumber=isNaN(t)?0:Math.max(Math.min(t,i-1),0),s){let t=this.pagingMarkup(this.pageNumber,i,e);this.querySelector(".paging.top").innerHTML=t,this.querySelector(".paging.bottom").innerHTML=t,a(...this.querySelectorAll("[data-page]")).forEach((t=>t.addEventListener("click",(()=>{this.page(parseInt(t.dataset.page))}))))}else this.querySelector(".paging.top").innerHTML="",this.querySelector(".paging.bottom").innerHTML="";this.listBody.innerHTML="";for(let t=this.itemsPerPage==1/0?0:this.pageNumber*this.itemsPerPage;t<(this.pageNumber+1)*this.itemsPerPage&&t<e;t++){let e=this.display[t],i=await this.getItemElement(e);i instanceof u?i.attach(this.listBody):this.listBody.appendChild(i)}}finally{this._busy=!1}}async getItemElement(t){let e=this.dedupeFunction(t);if(!this.elementMap.has(e)){let i=await this.renderItem(t);if("string"==typeof t)return i;this.elementMap.set(e,i)}return this.elementMap.get(e)}async renderItem(t){return await this._itemDisplayFunc(t)}pagingMarkup(t,e,i){let s="";s+=`${i} items`,s+=`<ui-button data-page="0" class="near ${0==t?"active":""}">1</ui-button>`;let l=t-1,n=t+1+1;l<1&&(n+=1-l,l=1),n>e-1&&(l-=n-e+1,n=e-1,l=Math.max(1,l)),l>1&&(s+="<span>...</span>");for(let e=l;e<n;e++)s+=`<ui-button data-page="${e}" class="${e==t?"active":""}">${e+1}</ui-button>`;return n<e-1&&(s+="<span>...</span>"),s+=`<ui-button data-page="${e-1}" class="near ${t==e-1?"active":""}">${e}</ui-button>`,s}}customElements.define("ui-list",_);const $=new class{map=new Map;constructor(){window.addEventListener("hashchange",(()=>this.update()))}update(){let t=this.#c();for(let e of this.map.values()){let i=t.find((t=>t[0]==e.path)),s=this.#o(i?.[1],e.type);e.value!==s&&(e.value=s,e.events.forEach((t=>t(s))))}}getEntry(t){return this.map.has(t)||this.map.set(t,{path:t,type:"string",value:null,events:[]}),this.map.get(t)}listen(t,e){let i=this.getEntry(t);i.value=this.#u(t),i.events.push(e),e(i.value)}set(t,e,i=!1){let s=this.getEntry(t);s.value!==e&&(this.#h(t,e,i),s.value=e,i||s.events.forEach((t=>t(e))))}#c(){return window.location.hash.substring(1).replaceAll("%7C","|").replaceAll("%7c","|").split("|").filter((t=>""!=t)).map((t=>t.includes("=")?t.split("=",2):[null,t]))}#u(t){let e=t,i=this.getEntry(t).type,s=this.#c().find((t=>t[0]==e)),l=s?.[1];return l&&(l=this.#o(l,i)),l}#o(t,e){let i=t;if(i)switch(e){case"number":i=parseFloat(t);break;case"boolean":i="true"==t.toLowerCase();break;case"json":i=JSON.parse(t)}return i}#h(t,e,i=!1){let s=t,l=this.getEntry(t).type,n=this.#c();if(null!==e&&""!==e){let t=n.find((t=>t[0]==s));null==t&&(t=[s,null],n.push(t)),"json"==l&&(e=JSON.stringify(e)),t[1]=e}else n=n.filter((t=>t[0]!=s));i?history.replaceState(void 0,void 0,"#"+n.map((t=>t[0]?t.join("="):t[1])).join("|")):window.location.hash=n.map((t=>t[0]?t.join("="):t[1])).join("|")}};class tt extends _{constructor(t={}){super((async t=>{let i=document.createElement("tr");for(let s of Object.values(this.attrs)){let l=document.createElement("td");e(l,await s.displayFunc(t)),i.append(l)}return i}),t),this.setAttribute("ui-table","")}get listLayout(){return'<table>\n<thead>\n\t\x3c!-- pagination --\x3e\n\t<tr><td class="paging top" colspan="100"></td></tr>\n\t\x3c!-- headers --\x3e\n\t<tr class="headers"></tr>\n\t\x3c!-- filters --\x3e\n\t<tr class="filter"></tr>\n</thead>\n<tbody class="list">\n</tbody>\n<tfoot>\n\t\x3c!-- pagination --\x3e\n\t<tr><td class="paging bottom" colspan="100"></td></tr>\n</tfoot>\n</table>'}sortDisplay(){let t=this.querySelector("thead tr.headers"),e=Object.values(this.attrs),i="";for(let t of e)i+=`<th data-table-id="${t.id}" ${this.attrs[t.name].value?`data-sort="${t.name}"`:""} style="${t.width?`width:${t.width}`:""}">${t.name}</th>`;t.innerHTML=i,t.querySelectorAll("th").forEach((t=>{t.dataset.sort&&(t.onclick=e=>{this.sort(t.dataset.sort)})})),this._sort&&this.querySelector(`thead tr.headers th[data-table-id='${this._sort.attr.id}']`).classList.add(this._sort.asc?"asc":"desc")}filterDisplay(){let t=this.querySelector(".filter");if(!t.hasChildNodes()){let e=Object.values(this.attrs),i=this.getFilters();for(let s of e){let e=n("<td></td>","tr"),l=i.find((t=>t.attr.includes(s.name)));if(l){let t={placeholder:"Search",callback:async(t,e)=>{this.dirty=!0,await this.page(),e.blur()}};l.suggest&&(t.options=async()=>[...new Set(this.data.map((t=>s.value(t).toString())))].sort()),e.append(new U(l,"value",t))}t.append(e)}}}}customElements.define("ui-table",tt);class et extends u{constructor(){super()}}customElements.define("ui-spacer",et);class it extends u{constructor(t){super();let e=t?.size??this.attributes.getNamedItem("size")?.value??"1em";this.style.setProperty("--size",e)}}customElements.define("ui-spinner",it);class st extends u{activeTab=null;constructor(t){super("<header></header><content></content>",t),this.setAttribute("ui-tabs","")}tab(t,i){let s,l=n("<div class='tab'></div>"),a=()=>(this.querySelectorAll("header .tab").forEach((t=>{t.classList.toggle("active",t==l)})),this.querySelector("content").innerHTML="",e(this.querySelector("content"),"function"==typeof i?i():i),s);return l.addEventListener("click",a),e(l,t),this.querySelector("header").append(l),s={open:a},null==this.activeTab?(this.activeTab=s,this.activeTab.open()):i instanceof HTMLElement?i.remove():Array.isArray(i)&&i.forEach((t=>t instanceof HTMLElement?t.remove():"")),s}}customElements.define("ui-tabs",st);class lt extends u{#r={parent:null,x:0,y:0,zoom:1,get width(){return this.parent.bounds.width/this.zoom},get height(){return this.parent.bounds.height/this.zoom}};#m;attachments=[];canvas;grid=[{step:1,offset:1,color:"#7772"},{step:6,offset:6,color:"#7772"},{step:12,offset:0,color:"#7774"},{step:1/0,offset:0,color:"#999"}];constructor(){super(),this.#r.parent=this,this.canvas=document.createElement("canvas"),this.append(this.canvas),this.setCss("--pixel",this.#r.zoom)}addAttachment(t,e=!0){this.attachments.push(t),this.append(t),e&&this.updateAttachments()}removeAttachment(t,e=!0){this.attachments=this.attachments.filter((e=>e!=t)),this.removeChild(t),e&&this.updateAttachments()}setCenter(t,e){this.#r.x=t-this.#r.width/2,this.#r.y=e-this.#r.height/2}getCenter(){return this.toView(this.#r.width/2,this.#r.height/2)}setZoom(t,e=null,i=null){if(null==e){let t=this.getCenter();e=t.x,i=t.y}let s=this.toScreen(e,i);this.#r.zoom=t,this.setCss("--pixel",1/this.#r.zoom);let l=this.toScreen(e,i),n=l.x-s.x,a=l.y-s.y;this.panScreen(n,a)}getZoom(){return this.#r.zoom}getView(){return{x:this.#r.x,y:this.#r.y,zoom:this.#r.zoom,width:this.#r.width,height:this.#r.height}}panScreen(t,e){this.#r.x+=t/this.#r.zoom,this.#r.y+=e/this.#r.zoom}toView(t,e){let i=this.#r,s=this.bounds,l={x:(t-s.x)/i.zoom+i.x,y:(e-s.y)/i.zoom+i.y,out:!1};return l.out=l.x<i.x||l.x>i.x+i.width||l.y<i.y||l.y>i.y+i.height,l}toScreen(t,e){let i=this.#r;return{x:(t-i.x)*i.zoom,y:(e-i.y)*i.zoom}}get bounds(){return this.getBoundingClientRect()}render(){let t=this.#r,e=JSON.stringify({x:t.x,y:t.y,w:t.width,h:t.height,z:t.zoom});null!=this.#m&&this.#m==e&&(this.#m=e),this.#m=e;let i=this.bounds;this.canvas.width==i.width&&this.canvas.height==i.height||(this.canvas.width=i.width,this.canvas.height=i.height);let s=this.canvas.getContext("2d");if(s.resetTransform(),s.clearRect(0,0,this.canvas.width,this.canvas.height),this.grid.length){let e=-t.x*t.zoom,i=-t.y*t.zoom,l=0,n=t.width*t.zoom,a=0,d=t.height*t.zoom;s.lineWidth=1;for(let c of this.grid)if(!(t.zoom*c.step<10)){s.beginPath(),s.strokeStyle=c.color;for(let o=c.offset??0;o<1e3*c.step;o+=c.step){let c=o*t.zoom;c+i>a&&c+i<d&&(s.moveTo(l,c+i),s.lineTo(n,c+i)),-c+i>a&&-c+i<d&&(s.moveTo(l,-c+i),s.lineTo(n,-c+i)),c+e>l&&c+e<n&&(s.moveTo(c+e,a),s.lineTo(c+e,d)),-c+e>l&&-c+e<n&&(s.moveTo(-c+e,a),s.lineTo(-c+e,d))}s.stroke()}}this.updateAttachments()}updateAttachments(){let t=this.#r;for(let e of this.attachments)if(e.render)e.render(this);else{let i=e.scalar??1,s=(e.x??0)*i-t.x,l=(e.y??0)*i-t.y,n=`translate(${s*t.zoom}px, ${l*t.zoom}px) scale(${t.zoom*i})`;console.log("update attachment...",e,n),e.style.transform=n}}bindMouse(){let t=null;this.addEventListener("contextmenu",(t=>{t.preventDefault()})),this.addEventListener("wheel",(t=>{t.preventDefault();let e=this.toView(t.x,t.y),i=Math.exp((480*Math.log(this.#r.zoom)-t.deltaY)/480);this.setZoom(i,e.x,e.y),this.render()})),this.addEventListener("mousedown",(e=>{e.preventDefault(),1==e.button&&(t=[e.x,e.y]),e.button,e.button})),document.addEventListener("mousemove",(e=>{if(t){let i=[e.x,e.y];this.panScreen(t[0]-i[0],t[1]-i[1]),t=i,this.render()}})),document.addEventListener("mouseup",(e=>{if(1==e.button&&t){let i=[e.x,e.y];this.panScreen(t[0]-i[0],t[1]-i[1]),t=null,this.render()}e.button,e.button}))}}customElements.define("ui-viewport",lt);class nt extends HTMLElement{sliderContainer;backButton;forwardButton;#b=0;itemsPerPage=1;itemWidth=1;#p={minElementWidth:140,elementMargin:20,visibleElementCallback:null};#Z=new WeakSet;constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML='\n\t\t<style>\n\n:host{\n\tdisplay: block;\n    max-width: 100vw;\n\tposition: relative;\n}\n\n:host > slot#slider{\n\twidth: 100%;\n    overflow: hidden;\n    display: flex;\n    box-sizing: border-box;\n}\n\n:host ::slotted(*){\n    width: var(--element-width) !important;\n    margin-left: var(--element-margin) !important;\n\tmargin-right: var(--element-margin) !important;\n    flex: 0 0 auto !important;\n    box-sizing: border-box !important;\n}\n\n:host slot.button{\n\tposition: absolute;\n\ttop:0;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\topacity: 0.5;\n\ttransition: opacity 0.3s;\n}\n\n:host(:hover) slot.button{\n\topacity: 0.8;\n}\n\n:host slot.button:hover{\n\topacity: 1; \n}\n\n:host slot.button.inactive{\n\topacity: 0.2;\n\tpointer-events: none;\n}\n\nslot#back{\n\tleft:0;\n}\n\nslot#forward{\n\tright:0;\n}</style>\n\t\t<slot id="slider"></slot>\n\t\t<slot class="button" id="back" name="back"><span style="font-size: 40px"></span></slot>\n\t\t<slot class="button" id="forward" name="forward"><span style="font-size: 40px"></span></slot>\n\t\t',this.forwardButton=t.querySelector("#forward"),this.forwardButton.addEventListener("click",this.slideForward.bind(this)),this.backButton=t.querySelector("#back"),this.backButton.addEventListener("click",this.slideBack.bind(this)),this.sliderContainer=t.querySelector("slot"),this.#W(this.sliderContainer),new ResizeObserver(this.redraw.bind(this)).observe(this),this.index=0}slideForward(){this.index=this.index==this.length-this.itemsPerPage?0:Math.min(this.length-this.itemsPerPage,this.index+this.itemsPerPage)}slideBack(){this.index=Math.max(0,this.index-this.itemsPerPage)}get index(){return this.#b}set index(t){0!=this.length&&(this.#b=t,this.backButton.classList.toggle("inactive",0==this.index),this.scrollToIndex(!0))}get options(){return this.#p}set options(t){this.#p=t,this.redraw()}redraw(){if(0==this.length)return;let t=this.sliderContainer.getBoundingClientRect().width,e=Math.floor(t/(this.options.minElementWidth+2*this.options.elementMargin));this.itemsPerPage=e,this.itemWidth=t/e-2*this.options.elementMargin,this.style.setProperty("--element-width",this.itemWidth+"px"),this.style.setProperty("--element-margin",this.options.elementMargin+"px"),this.scrollToIndex(!1)}get length(){return this.children.length}scrollToIndex(t){if(0==this.length)return;if(this.options.visibleElementCallback)for(let t=this.index-this.itemsPerPage;t<this.index+2*this.itemsPerPage;t++){let e=t<0?this.length- -t%this.length:t%this.length;console.log(e);let i=this.children[e];this.#Z.has(i)||(this.#Z.add(i),this.options.visibleElementCallback(i))}let e=this.children[this.index].offsetLeft-this.sliderContainer.offsetLeft-this.options.elementMargin;t?this.sliderContainer.scrollTo({top:0,left:e,behavior:"smooth"}):this.sliderContainer.scrollLeft=e}#W(t){let e=null;t.addEventListener("touchstart",(t=>{let i=t.touches[0];e||(e={originX:this.sliderContainer.scrollLeft,x:i.pageX,y:i.pageY,amountX:0,amountY:0,time:Date.now()})})),t.addEventListener("touchmove",(t=>{let i=t.touches[0];e.amountX=e.x-i.pageX,e.amountY=e.y-i.pageY,this.sliderContainer.scrollLeft=e.amountX+e.originX})),t.addEventListener("touchend",(t=>{console.log(e),Math.abs(e.amountX)>this.itemWidth?e.amountX>0?this.slideForward():this.slideBack():this.scrollToIndex(!0),e=null}))}}customElements.define("ui-slider",nt);class at extends u{}customElements.define("ui-row",at);class dt extends u{}customElements.define("ui-col",dt);let ct=document.createElement("head");ct.innerHTML=["https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"].map((t=>`<link href="${t}" rel="stylesheet">`)).join(""),document.head.prepend(...ct.childNodes);const ot={BasicElement:u,Badge:Y,Button:h,Cancel:S,Card:J,Code:R,ContextMenu:T,Form:b,Form2:Q,Grid:g,HashManager:D,HashController:$,InputLabel:M,Json:A,JsonInput:O,LabelledInput:P,TextInput:j,List:_,Modal:W,MultiSelectInput:K,MultiStringInput:w,NumberInput:H,Panel:p,SelectInput:z,Slider:nt,SliderInput:C,Spacer:et,Spinner:it,Splash:Z,StringInput:U,Table:tt,Tabs:st,Toast:L,Toggle:r,ToggleInput:E,Viewport:lt,info:G,warn:I,error:V,html:n,uuid:l,sleep:t,utils:d,factory:x,mixin:o};window.UI=ot;let ut=n;const ht=n;export{Y as Badge,u as BasicElement,h as Button,S as Cancel,J as Card,R as Code,dt as Column,T as ContextMenu,b as Form,Q as Form2,g as Grid,$ as HashController,D as HashManager,M as InputLabel,A as Json,O as JsonInput,P as LabelledInput,_ as List,W as Modal,K as MultiSelectInput,w as MultiStringInput,H as NumberInput,p as Panel,at as Row,z as SelectInput,nt as Slider,C as SliderInput,et as Spacer,it as Spinner,Z as Splash,U as StringInput,tt as Table,st as Tabs,j as TextInput,L as Toast,r as Toggle,E as ToggleInput,lt as Viewport,ut as createElement,ot as default,x as factory,ht as html,o as mixin,d as utils};
